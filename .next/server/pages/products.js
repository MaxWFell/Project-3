"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/products";
exports.ids = ["pages/products"];
exports.modules = {

/***/ "./components/Product.js":
/*!*******************************!*\
  !*** ./components/Product.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction Product({ product , addToCart , addToWishlist  }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"card p-4 my-3\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"row\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"col-md-3\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: product.image,\n                            className: \"img-fluid\"\n                        }, void 0, false, {\n                            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                            lineNumber: 6,\n                            columnNumber: 21\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                        lineNumber: 5,\n                        columnNumber: 17\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"col-md-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"font-weight-bold\",\n                                children: product.name\n                            }, void 0, false, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 9,\n                                columnNumber: 21\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-muted\",\n                                children: product.description\n                            }, void 0, false, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 10,\n                                columnNumber: 21\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-muted\",\n                                children: [\n                                    product.quantity,\n                                    \" in stock\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 11,\n                                columnNumber: 21\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                        lineNumber: 8,\n                        columnNumber: 17\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"col-md-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-weight-bold text-success\",\n                                children: \"$20.00\"\n                            }, void 0, false, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 14,\n                                columnNumber: 21\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"btn btn-dark btn-block\",\n                                onClick: ()=>addToCart(product.id),\n                                children: \"Add to Cart\"\n                            }, void 0, false, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 15,\n                                columnNumber: 21\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"btn btn-outline-info btn-block\",\n                                onClick: ()=>addToWishlist(product.id),\n                                children: \"Add to Wishlist\"\n                            }, void 0, false, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                                lineNumber: 18,\n                                columnNumber: 21\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                        lineNumber: 13,\n                        columnNumber: 17\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n                lineNumber: 4,\n                columnNumber: 13\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/components/Product.js\",\n            lineNumber: 3,\n            columnNumber: 9\n        }, this)\n    }, void 0, false);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Product);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1Byb2R1Y3QuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLFNBQVNBLFFBQVEsRUFBRUMsUUFBTyxFQUFFQyxVQUFTLEVBQUVDLGNBQWEsRUFBQyxFQUFFO0lBQ25ELHFCQUFRO2tCQUNKLDRFQUFDQztZQUFJQyxXQUFVO3NCQUNYLDRFQUFDRDtnQkFBSUMsV0FBVTs7a0NBQ1gsOERBQUNEO3dCQUFJQyxXQUFVO2tDQUNYLDRFQUFDQzs0QkFBSUMsS0FBS04sUUFBUU8sS0FBSzs0QkFBRUgsV0FBVTs7Ozs7Ozs7Ozs7a0NBRXZDLDhEQUFDRDt3QkFBSUMsV0FBVTs7MENBQ1gsOERBQUNJO2dDQUFHSixXQUFVOzBDQUFvQkosUUFBUVMsSUFBSTs7Ozs7OzBDQUM5Qyw4REFBQ0M7Z0NBQUVOLFdBQVU7MENBQWNKLFFBQVFXLFdBQVc7Ozs7OzswQ0FDOUMsOERBQUNEO2dDQUFFTixXQUFVOztvQ0FBY0osUUFBUVksUUFBUTtvQ0FBQzs7Ozs7Ozs7Ozs7OztrQ0FFaEQsOERBQUNUO3dCQUFJQyxXQUFVOzswQ0FDWCw4REFBQ1M7Z0NBQUdULFdBQVU7MENBQWdDOzs7Ozs7MENBQzlDLDhEQUFDVTtnQ0FBT1YsV0FBVTtnQ0FBeUJXLFNBQVMsSUFBTWQsVUFBVUQsUUFBUWdCLEVBQUU7MENBQUc7Ozs7OzswQ0FHakYsOERBQUNGO2dDQUFPVixXQUFVO2dDQUFpQ1csU0FBUyxJQUFNYixjQUFjRixRQUFRZ0IsRUFBRTswQ0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU2pIO0FBRUEsaUVBQWVqQixPQUFPQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2l0aXZlbHkvLi9jb21wb25lbnRzL1Byb2R1Y3QuanM/ZGFiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQcm9kdWN0KHsgcHJvZHVjdCwgYWRkVG9DYXJ0LCBhZGRUb1dpc2hsaXN0fSkge1xuICAgIHJldHVybiAoPD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkIHAtNCBteS0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e3Byb2R1Y3QuaW1hZ2V9IGNsYXNzTmFtZT1cImltZy1mbHVpZFwiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNlwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC13ZWlnaHQtYm9sZFwiPntwcm9kdWN0Lm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1tdXRlZFwiPntwcm9kdWN0LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1tdXRlZFwiPntwcm9kdWN0LnF1YW50aXR5fSBpbiBzdG9jazwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LXdlaWdodC1ib2xkIHRleHQtc3VjY2Vzc1wiPiQyMC4wMDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1kYXJrIGJ0bi1ibG9ja1wiIG9uQ2xpY2s9eygpID0+IGFkZFRvQ2FydChwcm9kdWN0LmlkKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICBBZGQgdG8gQ2FydFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLW91dGxpbmUtaW5mbyBidG4tYmxvY2tcIiBvbkNsaWNrPXsoKSA9PiBhZGRUb1dpc2hsaXN0KHByb2R1Y3QuaWQpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFkZCB0byBXaXNobGlzdFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgPC8+KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUHJvZHVjdDsiXSwibmFtZXMiOlsiUHJvZHVjdCIsInByb2R1Y3QiLCJhZGRUb0NhcnQiLCJhZGRUb1dpc2hsaXN0IiwiZGl2IiwiY2xhc3NOYW1lIiwiaW1nIiwic3JjIiwiaW1hZ2UiLCJoNCIsIm5hbWUiLCJwIiwiZGVzY3JpcHRpb24iLCJxdWFudGl0eSIsImgzIiwiYnV0dG9uIiwib25DbGljayIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Product.js\n");

/***/ }),

/***/ "./db/db.js":
/*!******************!*\
  !*** ./db/db.js ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addOrder\": () => (/* binding */ addOrder),\n/* harmony export */   \"addToCart\": () => (/* binding */ addToCart),\n/* harmony export */   \"addToWishlist\": () => (/* binding */ addToWishlist),\n/* harmony export */   \"clearCart\": () => (/* binding */ clearCart),\n/* harmony export */   \"clearWishlist\": () => (/* binding */ clearWishlist),\n/* harmony export */   \"connectDatabase\": () => (/* binding */ connectDatabase),\n/* harmony export */   \"deleteOrder\": () => (/* binding */ deleteOrder),\n/* harmony export */   \"deletePet\": () => (/* binding */ deletePet),\n/* harmony export */   \"ensureCollections\": () => (/* binding */ ensureCollections),\n/* harmony export */   \"getCart\": () => (/* binding */ getCart),\n/* harmony export */   \"getOrders\": () => (/* binding */ getOrders),\n/* harmony export */   \"getPet\": () => (/* binding */ getPet),\n/* harmony export */   \"getPets\": () => (/* binding */ getPets),\n/* harmony export */   \"getProduct\": () => (/* binding */ getProduct),\n/* harmony export */   \"getProducts\": () => (/* binding */ getProducts),\n/* harmony export */   \"getSeed\": () => (/* binding */ getSeed),\n/* harmony export */   \"getUser\": () => (/* binding */ getUser),\n/* harmony export */   \"getWishlist\": () => (/* binding */ getWishlist),\n/* harmony export */   \"insertPet\": () => (/* binding */ insertPet),\n/* harmony export */   \"insertSeed\": () => (/* binding */ insertSeed),\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser),\n/* harmony export */   \"removeFromCart\": () => (/* binding */ removeFromCart),\n/* harmony export */   \"removeFromWishlist\": () => (/* binding */ removeFromWishlist),\n/* harmony export */   \"searchProducts\": () => (/* binding */ searchProducts),\n/* harmony export */   \"validateLogin\": () => (/* binding */ validateLogin)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MongoClient = (__webpack_require__(/*! mongodb */ \"mongodb\").MongoClient);\nconst seedproducts = __webpack_require__(/*! ./productsData.json */ \"./db/productsData.json\");\n// const ObjectID = require('mongodb').ObjectID;\n// get mongo client\nasync function connectDatabase() {\n    const client = await MongoClient.connect(process.env.MONGODB_URI);\n    return client;\n}\nasync function ensureCollections(client) {\n    // list of collections to ensure\n    const collections = [\n        \"users\",\n        \"products\",\n        \"orders\",\n        \"seeds\",\n        \"cart\",\n        \"wishlist\",\n        \"users_pets\"\n    ];\n    // get db\n    const db = client.db();\n    // ensure collections\n    for (const collection of collections){\n        // check if collection exists\n        const exists = await db.listCollections({\n            name: collection\n        }).hasNext();\n        // if not, create it\n        if (!exists) {\n            await db.createCollection(collection);\n        }\n    }\n    // get seed: products_seed\n    const seed = await getSeed(db, \"products_seed\");\n    // if seed doesn't exist, insert it\n    if (!seed) {\n        // seed products\n        await seedProducts(db, seedproducts);\n        // create indexes: products -> name\n        await db.collection(\"products\").createIndex({\n            name: \"text\"\n        });\n        // insert seed\n        await insertSeed(db, {\n            name: \"products_seed\",\n            date: new Date()\n        });\n    }\n}\n// insert pet\nasync function insertPet(db, pet) {\n    // get pets collection\n    const pets = db.collection(\"users_pets\");\n    // insert pet\n    const result = await pets.insertOne(pet);\n    return result;\n}\n// get pet by id\nasync function getPet(db, id) {\n    const collection = db.collection(\"users_pets\");\n    const pet = await collection.findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return pet;\n}\n// get pets by user id\nasync function getPets(db, user_id) {\n    const collection = db.collection(\"users_pets\");\n    const pets = await collection.find({\n        user_id\n    }).toArray();\n    return pets;\n}\n// delete pet by id\nasync function deletePet(db, id) {\n    const collection = db.collection(\"users_pets\");\n    const result = await collection.deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return result;\n}\n// insert user: name, email, password\nasync function insertUser(db, user) {\n    // get users collection\n    const users = db.collection(\"users\");\n    // insert user\n    const result = await users.insertOne(user);\n    return result;\n}\n// get user by email\nasync function getUser(db, email) {\n    const collection = db.collection(\"users\");\n    const result = await collection.findOne({\n        email\n    });\n    return result;\n}\n// validate login\nasync function validateLogin(db, email, password) {\n    // get user\n    const user = await getUser(db, email);\n    // if user exists, check password\n    if (user) {\n        return user.password === password;\n    }\n    // user doesn't exist\n    return false;\n}\n// insert seed: name, date run\nasync function insertSeed(db, seed) {\n    // get seeds collection\n    const seeds = db.collection(\"seeds\");\n    // insert seed\n    const result = await seeds.insertOne(seed);\n    return result;\n}\n// get seed by name\nasync function getSeed(db, name) {\n    const collection = db.collection(\"seeds\");\n    const seed = await collection.findOne({\n        name\n    });\n    return seed;\n}\n// seed products\nasync function seedProducts(db, prods) {\n    // get products collection\n    const products = db.collection(\"products\");\n    // insert products\n    const result = await products.insertMany(prods);\n    return result;\n}\n// get products\nasync function getProducts(db, filter) {\n    const collection = db.collection(\"products\");\n    const products = await collection.find(filter).toArray();\n    return products;\n}\n// get product by id\nasync function getProduct(db, id) {\n    const collection = db.collection(\"products\");\n    const product = await collection.findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return product;\n}\n// search products\nasync function searchProducts(db, query) {\n    const collection = db.collection(\"products\");\n    const products = await collection.find({\n        $text: {\n            $search: query\n        }\n    }).toArray();\n    return products;\n}\n// get a users cart\nasync function getCart(db, user_id) {\n    const collection = db.collection(\"cart\");\n    const cart = await collection.findOne({\n        user_id\n    });\n    // if cart exists, return it\n    if (cart) {\n        return cart;\n    } else {\n        // if cart doesn't exist, create it\n        const newCart = {\n            user_id,\n            products: []\n        };\n        // insert new cart\n        await collection.insertOne(newCart);\n        return newCart;\n    }\n}\n// add product to cart\nasync function addToCart(db, user_id, product_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if product is already in cart, increment quantity\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products[index].quantity++;\n    } else {\n        // if product is not in cart, add it\n        products.push({\n            product_id,\n            quantity: 1\n        });\n    }\n    // update cart\n    const collection = db.collection(\"cart\");\n    const result = await collection.updateOne({\n        user_id\n    }, {\n        $set: {\n            products\n        }\n    });\n    return result;\n}\n// remove product from cart\nasync function removeFromCart(db, user_id, product_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if product is in cart, remove it\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products.splice(index, 1);\n        // update cart\n        const collection = db.collection(\"cart\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        console.log(result);\n        return result;\n    }\n    return null;\n}\n// clear cart\nasync function clearCart(db, user_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if cart has products, remove them\n    if (products.length > 0) {\n        // update cart\n        const collection = db.collection(\"cart\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products: []\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// get a users wishlist\nasync function getWishlist(db, user_id) {\n    const collection = db.collection(\"wishlist\");\n    // get wishlist\n    const list = await collection.findOne({\n        user_id\n    });\n    // if wishlist exists, return it\n    if (list) {\n        return list;\n    } else {\n        // if wishlist doesn't exist, create it\n        const newList = {\n            user_id,\n            products: []\n        };\n        // insert new wishlist\n        await collection.insertOne(newList);\n        return newList;\n    }\n}\n// add product to wishlist\nasync function addToWishlist(db, user_id, product_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if product is already in wishlist, do nothing\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index === -1) {\n        // if product is not in wishlist, add it\n        products.push({\n            product_id\n        });\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// remove product from wishlist\nasync function removeFromWishlist(db, user_id, product_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if product is in wishlist, remove it\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products.splice(index, 1);\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// clear wishlist\nasync function clearWishlist(db, user_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if wishlist has products, remove them\n    if (products.length > 0) {\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products: []\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// get a users orders\nasync function getOrders(db, user_id) {\n    const collection = db.collection(\"orders\");\n    // get orders: order by date, newest first\n    const orders = await collection.find({\n        user_id\n    }).sort({\n        date: -1\n    }).toArray();\n    return orders;\n}\n// add order\nasync function addOrder(db, order) {\n    // get orders collection\n    const orders = db.collection(\"orders\");\n    // insert order\n    const result = await orders.insertOne(order);\n    return result;\n}\n// delete order\nasync function deleteOrder(db, order_id) {\n    // get orders collection\n    const orders = db.collection(\"orders\");\n    // delete order\n    const result = await orders.deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(order_id)\n    });\n    return result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XG5cbmNvbnN0IE1vbmdvQ2xpZW50ID0gcmVxdWlyZSgnbW9uZ29kYicpLk1vbmdvQ2xpZW50O1xuXG5jb25zdCBzZWVkcHJvZHVjdHMgPSByZXF1aXJlKCcuL3Byb2R1Y3RzRGF0YS5qc29uJyk7XG5cbi8vIGNvbnN0IE9iamVjdElEID0gcmVxdWlyZSgnbW9uZ29kYicpLk9iamVjdElEO1xuXG4vLyBnZXQgbW9uZ28gY2xpZW50XG5hc3luYyBmdW5jdGlvbiBjb25uZWN0RGF0YWJhc2UoKSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgTW9uZ29DbGllbnQuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSk7XG5cbiAgICByZXR1cm4gY2xpZW50O1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVDb2xsZWN0aW9ucyhjbGllbnQpIHtcbiAgICAvLyBsaXN0IG9mIGNvbGxlY3Rpb25zIHRvIGVuc3VyZVxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gWyd1c2VycycsICdwcm9kdWN0cycsICdvcmRlcnMnLCAnc2VlZHMnLCAnY2FydCcsICd3aXNobGlzdCcsICd1c2Vyc19wZXRzJ107XG5cbiAgICAvLyBnZXQgZGJcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuXG4gICAgLy8gZW5zdXJlIGNvbGxlY3Rpb25zXG4gICAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGNvbGxlY3Rpb24gZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGRiLmxpc3RDb2xsZWN0aW9ucyh7IG5hbWU6IGNvbGxlY3Rpb24gfSkuaGFzTmV4dCgpO1xuXG4gICAgICAgIC8vIGlmIG5vdCwgY3JlYXRlIGl0XG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5jcmVhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG4gICAgLy8gZ2V0IHNlZWQ6IHByb2R1Y3RzX3NlZWRcbiAgICBjb25zdCBzZWVkID0gYXdhaXQgZ2V0U2VlZChkYiwgJ3Byb2R1Y3RzX3NlZWQnKTtcbiAgICBcbiAgICAvLyBpZiBzZWVkIGRvZXNuJ3QgZXhpc3QsIGluc2VydCBpdFxuICAgIGlmICghc2VlZCkge1xuICAgICAgICAvLyBzZWVkIHByb2R1Y3RzXG4gICAgICAgIGF3YWl0IHNlZWRQcm9kdWN0cyhkYiwgc2VlZHByb2R1Y3RzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNyZWF0ZSBpbmRleGVzOiBwcm9kdWN0cyAtPiBuYW1lXG4gICAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJykuY3JlYXRlSW5kZXgoeyBuYW1lOiAndGV4dCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbnNlcnQgc2VlZFxuICAgICAgICBhd2FpdCBpbnNlcnRTZWVkKGRiLCB7XG4gICAgICAgICAgICBuYW1lOiAncHJvZHVjdHNfc2VlZCcsXG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIGluc2VydCBwZXRcbmFzeW5jIGZ1bmN0aW9uIGluc2VydFBldChkYiwgcGV0KSB7XG4gICAgLy8gZ2V0IHBldHMgY29sbGVjdGlvblxuICAgIGNvbnN0IHBldHMgPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICAvLyBpbnNlcnQgcGV0XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGV0cy5pbnNlcnRPbmUocGV0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGdldCBwZXQgYnkgaWRcbmFzeW5jIGZ1bmN0aW9uIGdldFBldChkYiwgaWQpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbigndXNlcnNfcGV0cycpO1xuXG4gICAgY29uc3QgcGV0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuXG4gICAgcmV0dXJuIHBldDtcbn1cblxuLy8gZ2V0IHBldHMgYnkgdXNlciBpZFxuYXN5bmMgZnVuY3Rpb24gZ2V0UGV0cyhkYiwgdXNlcl9pZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICBjb25zdCBwZXRzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHsgdXNlcl9pZCB9KS50b0FycmF5KCk7XG5cbiAgICByZXR1cm4gcGV0cztcbn1cblxuLy8gZGVsZXRlIHBldCBieSBpZFxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGV0KGRiLCBpZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElkKGlkKSB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGluc2VydCB1c2VyOiBuYW1lLCBlbWFpbCwgcGFzc3dvcmRcbmFzeW5jIGZ1bmN0aW9uIGluc2VydFVzZXIoZGIsIHVzZXIpIHtcbiAgICAvLyBnZXQgdXNlcnMgY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJzID0gZGIuY29sbGVjdGlvbigndXNlcnMnKTtcblxuICAgIC8vIGluc2VydCB1c2VyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlcnMuaW5zZXJ0T25lKHVzZXIpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZ2V0IHVzZXIgYnkgZW1haWxcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXIoZGIsIGVtYWlsKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgZW1haWwgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyB2YWxpZGF0ZSBsb2dpblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVMb2dpbihkYiwgZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgLy8gZ2V0IHVzZXJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlcihkYiwgZW1haWwpO1xuXG4gICAgLy8gaWYgdXNlciBleGlzdHMsIGNoZWNrIHBhc3N3b3JkXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIucGFzc3dvcmQgPT09IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIC8vIHVzZXIgZG9lc24ndCBleGlzdFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gaW5zZXJ0IHNlZWQ6IG5hbWUsIGRhdGUgcnVuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRTZWVkKGRiLCBzZWVkKSB7XG4gICAgLy8gZ2V0IHNlZWRzIGNvbGxlY3Rpb25cbiAgICBjb25zdCBzZWVkcyA9IGRiLmNvbGxlY3Rpb24oJ3NlZWRzJyk7XG5cbiAgICAvLyBpbnNlcnQgc2VlZFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlZWRzLmluc2VydE9uZShzZWVkKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGdldCBzZWVkIGJ5IG5hbWVcbmFzeW5jIGZ1bmN0aW9uIGdldFNlZWQoZGIsIG5hbWUpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignc2VlZHMnKTtcblxuICAgIGNvbnN0IHNlZWQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBuYW1lIH0pO1xuXG4gICAgcmV0dXJuIHNlZWQ7XG59XG5cbi8vIHNlZWQgcHJvZHVjdHNcbmFzeW5jIGZ1bmN0aW9uIHNlZWRQcm9kdWN0cyhkYiwgcHJvZHMpIHtcbiAgICAvLyBnZXQgcHJvZHVjdHMgY29sbGVjdGlvblxuICAgIGNvbnN0IHByb2R1Y3RzID0gZGIuY29sbGVjdGlvbigncHJvZHVjdHMnKTtcblxuICAgIC8vIGluc2VydCBwcm9kdWN0c1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2R1Y3RzLmluc2VydE1hbnkocHJvZHMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZ2V0IHByb2R1Y3RzXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cyhkYiwgZmlsdGVyKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZChmaWx0ZXIpLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBwcm9kdWN0cztcbn1cblxuLy8gZ2V0IHByb2R1Y3QgYnkgaWRcbmFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3QoZGIsIGlkKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuXG4gICAgcmV0dXJuIHByb2R1Y3Q7XG59XG5cbi8vIHNlYXJjaCBwcm9kdWN0c1xuYXN5bmMgZnVuY3Rpb24gc2VhcmNoUHJvZHVjdHMoZGIsIHF1ZXJ5KSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZCh7ICR0ZXh0OiB7ICRzZWFyY2g6IHF1ZXJ5IH0gfSkudG9BcnJheSgpO1xuXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xufVxuXG4vLyBnZXQgYSB1c2VycyBjYXJ0XG5hc3luYyBmdW5jdGlvbiBnZXRDYXJ0KGRiLCB1c2VyX2lkKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ2NhcnQnKTtcblxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyX2lkIH0pO1xuXG4gICAgLy8gaWYgY2FydCBleGlzdHMsIHJldHVybiBpdFxuICAgIGlmIChjYXJ0KSB7XG4gICAgICAgIHJldHVybiBjYXJ0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIGNhcnQgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG4gICAgICAgIGNvbnN0IG5ld0NhcnQgPSB7XG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgcHJvZHVjdHM6IFtdLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGluc2VydCBuZXcgY2FydFxuICAgICAgICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShuZXdDYXJ0KTtcblxuICAgICAgICByZXR1cm4gbmV3Q2FydDtcbiAgICB9XG59XG5cbi8vIGFkZCBwcm9kdWN0IHRvIGNhcnRcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvQ2FydChkYiwgdXNlcl9pZCwgcHJvZHVjdF9pZCkge1xuICAgIC8vIGdldCBjYXJ0XG4gICAgY29uc3QgY2FydCA9IGF3YWl0IGdldENhcnQoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IGNhcnQgcHJvZHVjdHNcbiAgICBjb25zdCBwcm9kdWN0cyA9IGNhcnQucHJvZHVjdHM7XG5cbiAgICAvLyBpZiBwcm9kdWN0IGlzIGFscmVhZHkgaW4gY2FydCwgaW5jcmVtZW50IHF1YW50aXR5XG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHByb2R1Y3RzW2luZGV4XS5xdWFudGl0eSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIHByb2R1Y3QgaXMgbm90IGluIGNhcnQsIGFkZCBpdFxuICAgICAgICBwcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgICAgIHByb2R1Y3RfaWQsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGNhcnRcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignY2FydCcpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHJlbW92ZSBwcm9kdWN0IGZyb20gY2FydFxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlRnJvbUNhcnQoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgY2FydFxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBnZXRDYXJ0KGRiLCB1c2VyX2lkKTtcblxuICAgIC8vIGdldCBjYXJ0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBjYXJ0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBpbiBjYXJ0LCByZW1vdmUgaXRcbiAgICBjb25zdCBpbmRleCA9IHByb2R1Y3RzLmZpbmRJbmRleCgocHJvZHVjdCkgPT4gcHJvZHVjdC5wcm9kdWN0X2lkID09PSBwcm9kdWN0X2lkKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgcHJvZHVjdHMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICAvLyB1cGRhdGUgY2FydFxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignY2FydCcpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgICAgICAgeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBjbGVhciBjYXJ0XG5hc3luYyBmdW5jdGlvbiBjbGVhckNhcnQoZGIsIHVzZXJfaWQpIHtcbiAgICAvLyBnZXQgY2FydFxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBnZXRDYXJ0KGRiLCB1c2VyX2lkKTtcblxuICAgIC8vIGdldCBjYXJ0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBjYXJ0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgY2FydCBoYXMgcHJvZHVjdHMsIHJlbW92ZSB0aGVtXG4gICAgaWYgKHByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gdXBkYXRlIGNhcnRcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ2NhcnQnKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICAgICAgeyAkc2V0OiB7IHByb2R1Y3RzOiBbXSB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBnZXQgYSB1c2VycyB3aXNobGlzdFxuYXN5bmMgZnVuY3Rpb24gZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignd2lzaGxpc3QnKTtcblxuICAgIC8vIGdldCB3aXNobGlzdFxuICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyX2lkIH0pO1xuXG4gICAgLy8gaWYgd2lzaGxpc3QgZXhpc3RzLCByZXR1cm4gaXRcbiAgICBpZiAobGlzdCkge1xuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiB3aXNobGlzdCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcbiAgICAgICAgY29uc3QgbmV3TGlzdCA9IHtcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBwcm9kdWN0czogW10sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaW5zZXJ0IG5ldyB3aXNobGlzdFxuICAgICAgICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShuZXdMaXN0KTtcblxuICAgICAgICByZXR1cm4gbmV3TGlzdDtcbiAgICB9XG5cbn1cblxuLy8gYWRkIHByb2R1Y3QgdG8gd2lzaGxpc3RcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvV2lzaGxpc3QoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBhbHJlYWR5IGluIHdpc2hsaXN0LCBkbyBub3RoaW5nXG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIC8vIGlmIHByb2R1Y3QgaXMgbm90IGluIHdpc2hsaXN0LCBhZGQgaXRcbiAgICAgICAgcHJvZHVjdHMucHVzaCh7XG4gICAgICAgICAgICBwcm9kdWN0X2lkLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyB1cGRhdGUgd2lzaGxpc3RcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3dpc2hsaXN0Jyk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgICAgICB7IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIHsgJHNldDogeyBwcm9kdWN0cyB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyByZW1vdmUgcHJvZHVjdCBmcm9tIHdpc2hsaXN0XG5hc3luYyBmdW5jdGlvbiByZW1vdmVGcm9tV2lzaGxpc3QoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBpbiB3aXNobGlzdCwgcmVtb3ZlIGl0XG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHByb2R1Y3RzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHdpc2hsaXN0XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd3aXNobGlzdCcpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgICAgICAgeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLy8gY2xlYXIgd2lzaGxpc3RcbmFzeW5jIGZ1bmN0aW9uIGNsZWFyV2lzaGxpc3QoZGIsIHVzZXJfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgd2lzaGxpc3QgaGFzIHByb2R1Y3RzLCByZW1vdmUgdGhlbVxuICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHVwZGF0ZSB3aXNobGlzdFxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignd2lzaGxpc3QnKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICAgICAgeyAkc2V0OiB7IHByb2R1Y3RzOiBbXSB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBnZXQgYSB1c2VycyBvcmRlcnNcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZGVycyhkYiwgdXNlcl9pZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCdvcmRlcnMnKTtcblxuICAgIC8vIGdldCBvcmRlcnM6IG9yZGVyIGJ5IGRhdGUsIG5ld2VzdCBmaXJzdFxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZCh7IHVzZXJfaWQgfSkuc29ydCh7IGRhdGU6IC0xIH0pLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBvcmRlcnM7XG59XG5cbi8vIGFkZCBvcmRlclxuYXN5bmMgZnVuY3Rpb24gYWRkT3JkZXIoZGIsIG9yZGVyKSB7XG4gICAgLy8gZ2V0IG9yZGVycyBjb2xsZWN0aW9uXG4gICAgY29uc3Qgb3JkZXJzID0gZGIuY29sbGVjdGlvbignb3JkZXJzJyk7XG4gICAgLy8gaW5zZXJ0IG9yZGVyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JkZXJzLmluc2VydE9uZShvcmRlcik7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBkZWxldGUgb3JkZXJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGRiLCBvcmRlcl9pZCkge1xuICAgIC8vIGdldCBvcmRlcnMgY29sbGVjdGlvblxuICAgIGNvbnN0IG9yZGVycyA9IGRiLmNvbGxlY3Rpb24oJ29yZGVycycpO1xuXG4gICAgLy8gZGVsZXRlIG9yZGVyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JkZXJzLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElkKG9yZGVyX2lkKSB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cblxuZXhwb3J0IHtcbiAgICBjb25uZWN0RGF0YWJhc2UsXG4gICAgZW5zdXJlQ29sbGVjdGlvbnMsXG4gICAgaW5zZXJ0VXNlcixcbiAgICBnZXRVc2VyLFxuICAgIHZhbGlkYXRlTG9naW4sXG4gICAgaW5zZXJ0U2VlZCxcbiAgICBnZXRTZWVkLFxuICAgIGdldFByb2R1Y3RzLFxuICAgIGdldFByb2R1Y3QsXG4gICAgZ2V0Q2FydCxcbiAgICBhZGRUb0NhcnQsXG4gICAgcmVtb3ZlRnJvbUNhcnQsXG4gICAgZ2V0V2lzaGxpc3QsXG4gICAgYWRkVG9XaXNobGlzdCxcbiAgICByZW1vdmVGcm9tV2lzaGxpc3QsXG4gICAgZ2V0T3JkZXJzLFxuICAgIGFkZE9yZGVyLFxuICAgIGRlbGV0ZU9yZGVyLFxuICAgIGNsZWFyQ2FydCxcbiAgICBjbGVhcldpc2hsaXN0LFxuICAgIGluc2VydFBldCxcbiAgICBnZXRQZXRzLFxuICAgIGdldFBldCxcbiAgICBkZWxldGVQZXQsXG4gICAgc2VhcmNoUHJvZHVjdHMsXG59Il0sIm5hbWVzIjpbIk9iamVjdElkIiwiTW9uZ29DbGllbnQiLCJyZXF1aXJlIiwic2VlZHByb2R1Y3RzIiwiY29ubmVjdERhdGFiYXNlIiwiY2xpZW50IiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImVuc3VyZUNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJkYiIsImNvbGxlY3Rpb24iLCJleGlzdHMiLCJsaXN0Q29sbGVjdGlvbnMiLCJuYW1lIiwiaGFzTmV4dCIsImNyZWF0ZUNvbGxlY3Rpb24iLCJzZWVkIiwiZ2V0U2VlZCIsInNlZWRQcm9kdWN0cyIsImNyZWF0ZUluZGV4IiwiaW5zZXJ0U2VlZCIsImRhdGUiLCJEYXRlIiwiaW5zZXJ0UGV0IiwicGV0IiwicGV0cyIsInJlc3VsdCIsImluc2VydE9uZSIsImdldFBldCIsImlkIiwiZmluZE9uZSIsIl9pZCIsImdldFBldHMiLCJ1c2VyX2lkIiwiZmluZCIsInRvQXJyYXkiLCJkZWxldGVQZXQiLCJkZWxldGVPbmUiLCJpbnNlcnRVc2VyIiwidXNlciIsInVzZXJzIiwiZ2V0VXNlciIsImVtYWlsIiwidmFsaWRhdGVMb2dpbiIsInBhc3N3b3JkIiwic2VlZHMiLCJwcm9kcyIsInByb2R1Y3RzIiwiaW5zZXJ0TWFueSIsImdldFByb2R1Y3RzIiwiZmlsdGVyIiwiZ2V0UHJvZHVjdCIsInByb2R1Y3QiLCJzZWFyY2hQcm9kdWN0cyIsInF1ZXJ5IiwiJHRleHQiLCIkc2VhcmNoIiwiZ2V0Q2FydCIsImNhcnQiLCJuZXdDYXJ0IiwiYWRkVG9DYXJ0IiwicHJvZHVjdF9pZCIsImluZGV4IiwiZmluZEluZGV4IiwicXVhbnRpdHkiLCJwdXNoIiwidXBkYXRlT25lIiwiJHNldCIsInJlbW92ZUZyb21DYXJ0Iiwic3BsaWNlIiwiY29uc29sZSIsImxvZyIsImNsZWFyQ2FydCIsImxlbmd0aCIsImdldFdpc2hsaXN0IiwibGlzdCIsIm5ld0xpc3QiLCJhZGRUb1dpc2hsaXN0IiwicmVtb3ZlRnJvbVdpc2hsaXN0IiwiY2xlYXJXaXNobGlzdCIsImdldE9yZGVycyIsIm9yZGVycyIsInNvcnQiLCJhZGRPcmRlciIsIm9yZGVyIiwiZGVsZXRlT3JkZXIiLCJvcmRlcl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./db/db.js\n");

/***/ }),

/***/ "./pages/products.js":
/*!***************************!*\
  !*** ./pages/products.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"getServerSideProps\": () => (/* binding */ getServerSideProps)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/Product */ \"./components/Product.js\");\n/* harmony import */ var _db_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/db/db */ \"./db/db.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! toastr */ \"toastr\");\n/* harmony import */ var toastr__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/router */ \"next/router\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nfunction products({ products  }) {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    // loader\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    const [hasParams, setHasParams] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    // check if user is logged in, local storage\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        const user = JSON.parse(localStorage.getItem(\"user\"));\n        // if user is logged in, show profile\n        if (user) {\n            setUser(user);\n            setLoading(false);\n            // check if query params exist\n            if (router.query && router.query.q) {\n                setHasParams(true);\n            } else {\n                setHasParams(false);\n            }\n        } else {\n            // redirect to login page\n            window.location.href = \"/login\";\n        }\n    }, []);\n    // add product to cart\n    const addToCart = async (product)=>{\n        // send post request to /api/cart\n        const res = await fetch(\"/api/cart\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                operation: \"add\",\n                user_id: user.id,\n                data: {\n                    product\n                }\n            })\n        });\n        // get response\n        const data = await res.json();\n        // if successful, add product to cart\n        if (data.success) {\n            toastr__WEBPACK_IMPORTED_MODULE_4___default().success(\"Successfully added to cart\");\n        } else {\n            toastr__WEBPACK_IMPORTED_MODULE_4___default().error(\"Failed to add to cart\");\n        }\n    };\n    // add product to wishlist\n    const addToWishlist = async (product)=>{\n        // send post request to /api/wishlist\n        const res = await fetch(\"/api/wishlist\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                operation: \"add\",\n                user_id: user.id,\n                data: {\n                    product\n                }\n            })\n        });\n        // get response\n        const data = await res.json();\n        // if successful, add product to wishlist\n        if (data.success) {\n            toastr__WEBPACK_IMPORTED_MODULE_4___default().success(\"Successfully added to wishlist\");\n        } else {\n            toastr__WEBPACK_IMPORTED_MODULE_4___default().error(\"Failed to add to wishlist\");\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: {\n                // linear gradient from #adc178 to #adc179\n                backgroundImage: \"linear-gradient(90deg, #adc178 0%, #adc179 100%)\"\n            },\n            children: loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"py-5 text-center text-light\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"display-4 font-weight-bold\",\n                    children: \"Loading products...\"\n                }, void 0, false, {\n                    fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                    lineNumber: 106,\n                    columnNumber: 21\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                lineNumber: 105,\n                columnNumber: 17\n            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"container\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"clearfix\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"float-left\",\n                                        children: hasParams ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                            className: \"py-4 text-light\",\n                                            children: [\n                                                'Search results for \"',\n                                                router.query.q,\n                                                '\"'\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                            lineNumber: 115,\n                                            columnNumber: 37\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                            className: \"py-4 text-light\",\n                                            children: \"Shop stuff for your pets!\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                            lineNumber: 117,\n                                            columnNumber: 33\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                        lineNumber: 112,\n                                        columnNumber: 29\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"float-right\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/cart\",\n                                            className: \"btn btn-lg btn-light mt-4\",\n                                            children: \"View cart\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                            lineNumber: 121,\n                                            columnNumber: 33\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                        lineNumber: 120,\n                                        columnNumber: 29\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                lineNumber: 111,\n                                columnNumber: 25\n                            }, this),\n                            products.map((product)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Product__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n                                        product: product,\n                                        addToCart: addToCart,\n                                        addToWishlist: addToWishlist\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                        lineNumber: 126,\n                                        columnNumber: 33\n                                    }, this)\n                                }, product.id, false, {\n                                    fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                                    lineNumber: 125,\n                                    columnNumber: 29\n                                }, this))\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                        lineNumber: 110,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"py-5\"\n                    }, void 0, false, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                        lineNumber: 130,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"py-5\"\n                    }, void 0, false, {\n                        fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n                        lineNumber: 131,\n                        columnNumber: 21\n                    }, this)\n                ]\n            }, void 0, true)\n        }, void 0, false, {\n            fileName: \"/Users/maxfell/Desktop/bootcamp/homework/Project-3/pages/products.js\",\n            lineNumber: 99,\n            columnNumber: 9\n        }, this)\n    }, void 0, false);\n}\n// get server-side props\nasync function getServerSideProps(context) {\n    // get db\n    const client = await (0,_db_db__WEBPACK_IMPORTED_MODULE_2__.connectDatabase)();\n    // ensure collections exist\n    await (0,_db_db__WEBPACK_IMPORTED_MODULE_2__.ensureCollections)(client);\n    // get db\n    const db = client.db();\n    let products = [];\n    // has query\n    if (context.query && context.query.q) {\n        // search by name\n        if (context.query.q) {\n            products = await (0,_db_db__WEBPACK_IMPORTED_MODULE_2__.searchProducts)(db, context.query.q);\n        }\n    } else {\n        // get products\n        products = await (0,_db_db__WEBPACK_IMPORTED_MODULE_2__.getProducts)(db, {});\n    }\n    const filteredProducts = products.map((product)=>{\n        return {\n            id: product._id.toString(),\n            name: product.name,\n            image: product.image_file,\n            price: product.price,\n            description: product.prod_description,\n            quantity: product.quantity,\n            age_preferred: product.age_preferred\n        };\n    });\n    // return products\n    return {\n        props: {\n            products: filteredProducts\n        }\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (products);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixRQUFRZ0MsVUFBVTtZQUN6QkMsT0FBT2pDLFFBQVFpQyxLQUFLO1lBQ3BCQyxhQUFhbEMsUUFBUW1DLGdCQUFnQjtZQUNyQ0MsVUFBVXBDLFFBQVFvQyxRQUFRO1lBQzFCQyxlQUFlckMsUUFBUXFDLGFBQWE7UUFDeEM7SUFDSjtJQUdBLGtCQUFrQjtJQUNsQixPQUFPO1FBQ0hDLE9BQU87WUFDSHhELFVBQVU2QztRQUNkO0lBQ0o7QUFDSixDQUFDO0FBRUQsaUVBQWU3QyxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2l0aXZlbHkvLi9wYWdlcy9wcm9kdWN0cy5qcz8zMTY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9kdWN0IGZyb20gXCJAL2NvbXBvbmVudHMvUHJvZHVjdFwiO1xuaW1wb3J0IHsgY29ubmVjdERhdGFiYXNlLCBlbnN1cmVDb2xsZWN0aW9ucywgZ2V0UHJvZHVjdHMsIHNlYXJjaFByb2R1Y3RzIH0gZnJvbSBcIkAvZGIvZGJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB0b2FzdHIgZnJvbSBcInRvYXN0clwiO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInXG5cbmZ1bmN0aW9uIHByb2R1Y3RzKHsgcHJvZHVjdHMgfSkge1xuICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gICAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgICAvLyBsb2FkZXJcbiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBbaGFzUGFyYW1zLCBzZXRIYXNQYXJhbXNdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgLy8gY2hlY2sgaWYgdXNlciBpcyBsb2dnZWQgaW4sIGxvY2FsIHN0b3JhZ2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJcIikpO1xuXG4gICAgICAgIC8vIGlmIHVzZXIgaXMgbG9nZ2VkIGluLCBzaG93IHByb2ZpbGVcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgIHNldFVzZXIodXNlcik7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgcXVlcnkgcGFyYW1zIGV4aXN0XG4gICAgICAgICAgICBpZiAocm91dGVyLnF1ZXJ5ICYmIHJvdXRlci5xdWVyeS5xKSB7XG4gICAgICAgICAgICAgICAgc2V0SGFzUGFyYW1zKHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRIYXNQYXJhbXMoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZVxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9sb2dpblwiO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgLy8gYWRkIHByb2R1Y3QgdG8gY2FydFxuICAgIGNvbnN0IGFkZFRvQ2FydCA9IGFzeW5jIChwcm9kdWN0KSA9PiB7XG4gICAgICAgIC8vIHNlbmQgcG9zdCByZXF1ZXN0IHRvIC9hcGkvY2FydFxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcIi9hcGkvY2FydFwiLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlci5pZCxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3QsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBnZXQgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgICAgLy8gaWYgc3VjY2Vzc2Z1bCwgYWRkIHByb2R1Y3QgdG8gY2FydFxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhcIlN1Y2Nlc3NmdWxseSBhZGRlZCB0byBjYXJ0XCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGZhaWxlZCwgc2hvdyBlcnJvclxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihcIkZhaWxlZCB0byBhZGQgdG8gY2FydFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBwcm9kdWN0IHRvIHdpc2hsaXN0XG4gICAgY29uc3QgYWRkVG9XaXNobGlzdCA9IGFzeW5jIChwcm9kdWN0KSA9PiB7XG4gICAgICAgIC8vIHNlbmQgcG9zdCByZXF1ZXN0IHRvIC9hcGkvd2lzaGxpc3RcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3dpc2hsaXN0XCIsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJhZGRcIixcbiAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGdldCByZXNwb25zZVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgICAvLyBpZiBzdWNjZXNzZnVsLCBhZGQgcHJvZHVjdCB0byB3aXNobGlzdFxuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhcIlN1Y2Nlc3NmdWxseSBhZGRlZCB0byB3aXNobGlzdFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBmYWlsZWQsIHNob3cgZXJyb3JcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIHRvIHdpc2hsaXN0XCIpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gKDw+XG4gICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgIC8vIGxpbmVhciBncmFkaWVudCBmcm9tICNhZGMxNzggdG8gI2FkYzE3OVxuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCg5MGRlZywgI2FkYzE3OCAwJSwgI2FkYzE3OSAxMDAlKVwiLFxuICAgICAgICB9fT5cbiAgICAgICAgICAgIHsvKiBpZiBsb2FkaW5nICovfVxuICAgICAgICAgICAge2xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B5LTUgdGV4dC1jZW50ZXIgdGV4dC1saWdodCc+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0nZGlzcGxheS00IGZvbnQtd2VpZ2h0LWJvbGQnPkxvYWRpbmcgcHJvZHVjdHMuLi48L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsZWFyZml4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG9hdC1sZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBpZiBoYXMgcGFyYW1zICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aGFzUGFyYW1zID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInB5LTQgdGV4dC1saWdodFwiPlNlYXJjaCByZXN1bHRzIGZvciBcIntyb3V0ZXIucXVlcnkucX1cIjwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJweS00IHRleHQtbGlnaHRcIj5TaG9wIHN0dWZmIGZvciB5b3VyIHBldHMhPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsb2F0LXJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvY2FydFwiIGNsYXNzTmFtZT1cImJ0biBidG4tbGcgYnRuLWxpZ2h0IG10LTRcIj5WaWV3IGNhcnQ8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17cHJvZHVjdC5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQcm9kdWN0IHByb2R1Y3Q9e3Byb2R1Y3R9IGFkZFRvQ2FydD17YWRkVG9DYXJ0fSBhZGRUb1dpc2hsaXN0PXthZGRUb1dpc2hsaXN0fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHktNSc+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdweS01Jz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgIDwvPilcbn1cblxuLy8gZ2V0IHNlcnZlci1zaWRlIHByb3BzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKGNvbnRleHQpIHtcbiAgICAvLyBnZXQgZGJcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjb25uZWN0RGF0YWJhc2UoKTtcblxuICAgIC8vIGVuc3VyZSBjb2xsZWN0aW9ucyBleGlzdFxuICAgIGF3YWl0IGVuc3VyZUNvbGxlY3Rpb25zKGNsaWVudCk7XG5cbiAgICAvLyBnZXQgZGJcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuXG4gICAgbGV0IHByb2R1Y3RzID0gW107XG4gICAgLy8gaGFzIHF1ZXJ5XG4gICAgaWYgKGNvbnRleHQucXVlcnkgJiYgY29udGV4dC5xdWVyeS5xKSB7XG4gICAgICAgIC8vIHNlYXJjaCBieSBuYW1lXG4gICAgICAgIGlmIChjb250ZXh0LnF1ZXJ5LnEpIHtcbiAgICAgICAgICAgIHByb2R1Y3RzID0gYXdhaXQgc2VhcmNoUHJvZHVjdHMoZGIsIGNvbnRleHQucXVlcnkucSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBnZXQgcHJvZHVjdHNcbiAgICAgICAgcHJvZHVjdHMgPSBhd2FpdCBnZXRQcm9kdWN0cyhkYiwge30pO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkUHJvZHVjdHMgPSBwcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBwcm9kdWN0Ll9pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxuICAgICAgICAgICAgaW1hZ2U6IHByb2R1Y3QuaW1hZ2VfZmlsZSxcbiAgICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb2R1Y3QucHJvZF9kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHF1YW50aXR5OiBwcm9kdWN0LnF1YW50aXR5LFxuICAgICAgICAgICAgYWdlX3ByZWZlcnJlZDogcHJvZHVjdC5hZ2VfcHJlZmVycmVkLFxuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIC8vIHJldHVybiBwcm9kdWN0c1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBwcm9kdWN0czogZmlsdGVyZWRQcm9kdWN0cyxcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgcHJvZHVjdHM7Il0sIm5hbWVzIjpbIlByb2R1Y3QiLCJjb25uZWN0RGF0YWJhc2UiLCJlbnN1cmVDb2xsZWN0aW9ucyIsImdldFByb2R1Y3RzIiwic2VhcmNoUHJvZHVjdHMiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInRvYXN0ciIsInVzZVJvdXRlciIsInByb2R1Y3RzIiwicm91dGVyIiwidXNlciIsInNldFVzZXIiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImhhc1BhcmFtcyIsInNldEhhc1BhcmFtcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJxdWVyeSIsInEiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJhZGRUb0NhcnQiLCJwcm9kdWN0IiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInN0cmluZ2lmeSIsIm9wZXJhdGlvbiIsInVzZXJfaWQiLCJpZCIsImRhdGEiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiYWRkVG9XaXNobGlzdCIsImRpdiIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY2xhc3NOYW1lIiwicCIsImgxIiwiYSIsIm1hcCIsImdldFNlcnZlclNpZGVQcm9wcyIsImNvbnRleHQiLCJjbGllbnQiLCJkYiIsImZpbHRlcmVkUHJvZHVjdHMiLCJfaWQiLCJ0b1N0cmluZyIsIm5hbWUiLCJpbWFnZSIsImltYWdlX2ZpbGUiLCJwcmljZSIsImRlc2NyaXB0aW9uIiwicHJvZF9kZXNjcmlwdGlvbiIsInF1YW50aXR5IiwiYWdlX3ByZWZlcnJlZCIsInByb3BzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/products.js\n");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/router":
/*!******************************!*\
  !*** external "next/router" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("next/router");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "toastr":
/*!*************************!*\
  !*** external "toastr" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("toastr");

/***/ }),

/***/ "./db/productsData.json":
/*!******************************!*\
  !*** ./db/productsData.json ***!
  \******************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"name":"Crispy Rosemary Chicken and Fries","prod_description":"Potatoes are crispy like french fries, just serve with ketchup.  Kids love this!","price":24.99,"quantity":20,"image_file":"/images/rosemary_chicken_with_potatoes.png","ingredients":"chicken, potatoes, olive oil, rosemary, oregano, garlic powder, salt, pepper"},{"name":"Slow Cooked Baby Back Ribs","prod_description":"Ribs cooked to perfection","price":21.99,"quantity":60,"image_file":"/images/baby_back_ribs.png","ingredients":"baby back ribs, salt, black pepper, water, onion, garlic, barbeque sauce"},{"name":"Worlds Best Honey Garlic Pork Chops","prod_description":"Plain old pork chops turned into something special","price":15.99,"quantity":36,"image_file":"/images/worlds_best_pork_chops.png","ingredients":"ketchup, honey, soy sauce, garlic, pork chops"},{"name":"Chicken, Sausage, Peppers, and Potatoes","prod_description":"Chicken, sausage, peppers, and potatoes","price":13.99,"quantity":10,"image_file":"/images/chicken_sausage_pepper_potatoes.png","ingredients":"olive oil, hot Italian sausage, chicken, sweet peppers, potatoes, red onion, yellow onion, Italian herbs, kosher salt, black pepper, Italian parsley"},{"name":"Mississippi Roast - Slow Cooked Pepperoncini Pot Roast","prod_description":"Serve with mashed potatoes or egg noodles.","price":18.99,"quantity":8,"image_file":"/images/pepperoncini_pot_roast.png","ingredients":"beef chuck roast, butter, pepperoncini peppers, ranch dressing mix, au jus mix"},{"name":"Sheet Pan Chicken Fajitas","prod_description":"Quick and flavorfull chicken fajitas.","price":12.99,"quantity":50,"image_file":"/images/sheet_pan_chicken_fajitas.png","ingredients":"vegetable oil, chili powder, oregano, garlic, onion, cumin, salt, pepper, cayenne pepper, chicken, bell peppers, onion, cilantro, lime"},{"name":"Fiesta Slow Cooked Shredded Chicken Tacos","prod_description":"Delicious chicken tacos. Combine with cheese, lettuce, tomatoes, and onions for a taste treat","price":10,"quantity":100,"image_file":"/images/fiesta_shredded_chicken_tacos.png","ingredients":"chicken broth, taco seasoning mix, chicken"},{"name":"Crispy Oven-Roasted Rosemary Chicken with Sausage and Potatoes","prod_description":"Easy pot roast shortcut.","price":19.99,"quantity":18,"image_file":"/images/rosemary_chicken_sausage_potatoes.png","ingredients":"olive oil, bratwurst, chicken, kosher salt, potatoes, rosemary, red wine vinegar"},{"name":"Easy and Quick Halushki","prod_description":"This Polish dish appeals to the whole family!","price":12.98,"quantity":5,"image_file":"/images/halushki.png","ingredients":"bacon, onion, egg noodles, cabbage, salt, black pepper"},{"name":"Peach Pork Picante","prod_description":"Salsa, seasoning, pork, and peach preserves","price":14.99,"quantity":10,"image_file":"/images/peach_pork_picante.png","ingredients":"pork, taco seasoning mix, salsa, peach preserves"},{"name":"Easy Breaded Shrimp","prod_description":"A hit with kids and adults alike","price":19.99,"quantity":30,"image_file":"/images/easy_breaded_shrimp.png","ingredients":"vegetable oil, shrimp, egg, bread crumbs"},{"name":"Cabbage Balushka or Cabbage and Noodles","prod_description":"Cabbage, onions, and egg noodles cooked in butter","price":9.99,"quantity":2,"image_file":"/images/cabbage_balushka.png","ingredients":"egg noodles, butter, onion, cabbage, salt, black pepper"},{"name":"Roasted Chicken with Lemon and Rosemary","prod_description":"Whole chicken cooked with lemons, garlic, and rosemary","price":11.99,"quantity":25,"image_file":"/images/roasted_chicken_lemon_rosemary.png","ingredients":"chicken, onion, lemon, garlic, rosemary, olive oil, salt, black pepper"},{"name":"Sheet Pan Shrimp Fajitas","prod_description":"Easy shrimp fajitas","price":15.99,"quantity":10,"image_file":"/images/sheet_pan_shrimp_fajitas.png","ingredients":"fajita seasoning, olive oil, shrimp, red bell pepper, yellow bell pepper, red onion, jalapeno pepper"},{"name":"Fettucine Alfredo with Ham","prod_description":"Fettucine alfredo with ham","price":12.99,"quantity":15,"image_file":"/images/fettucine_alfredo_with_ham.png","ingredients":"pasta, butter, cooked ham, heavy cream, Parmesan cheese"},{"name":"Pulled Pork Barbeque","prod_description":"Pork ribs along with pork loin. Serve with a baked potatoes or bun","price":12.99,"quantity":30,"image_file":"/images/pulled_pork_barbeque.png","ingredients":"barbeque sauce, dry onion soup mix, pork"},{"name":"Tender Slow Cooked Pork Roast","prod_description":"Falls off the bone!","price":29.99,"quantity":23,"image_file":"/images/slow_cooked_pork_roast.png","ingredients":"pork, tomato sauce, soy sauce, white sugar, ground mustard"},{"name":"Roasted Carrot and Fennel Pork","prod_description":"Pork, served deliciously.","price":19.95,"quantity":14,"image_file":"/images/roasted_carrot_and_fennel_pork.png","ingredients":"pork, honey mustard, thyme, fennel bulbs, carrot, onion, salt, black pepper"},{"name":"Slow Cooked Turkey Breast with Gravy","prod_description":"Delicious gravy with super moist turkey breast","price":12.99,"quantity":25,"image_file":"/images/slow_cooked_turkey_breast.png","ingredients":"turkey, cream of mushroom soup, Cheddar cheese soup"},{"name":"Broiled Spanish Mackerel","prod_description":"Mackerel simple and tasty","price":19.99,"quantity":20,"image_file":"/images/broiled_Spanish_mackerel.png","ingredients":"Spanish mackerel, olive oil, paprika, salt, black pepper, lemon"},{"name":"Salsa Verde Pork","prod_description":"Pork with Salsa Verde. Also, excellent for leftovers","price":19.99,"quantity":5,"image_file":"/images/salsa_verde_pork.png","ingredients":"canola oil, pork, green salsa"},{"name":"Chicken, Apple, and Brussels Sprout Sheet Pan Dinner","prod_description":"Flavors of fall. Serve alone or with rice or salad","price":18.99,"quantity":20,"image_file":"/images/chicken_apple_brussels_sprout.png","ingredients":"Brussels sprouts, apple, pancetta, olive oil, rosemary, chicken, salt, black pepper"},{"name":"Bucatini Cacio e Pepe - Roman Sheep Herders Pasta","prod_description":"Pasta, cheese, and pepper","price":12.99,"quantity":20,"image_file":"/images/bucatini_cacio_e_pepe.png","ingredients":"salt, bucatini, Pecorino Romano cheese, black pepper"},{"name":"Jackfruit Pulled \'Pork\'","prod_description":"Vegetarian pork.","price":23.95,"quantity":6,"image_file":"/images/jackfruit_pulled_pork.png","ingredients":"olive oil, Vidalia onion, garlic, green jackfruit, barbeque sauce"},{"name":"Taco-Seasoned Salmon","prod_description":"Even if you don\'t like fish, you\'ll enjoy this salmon","price":14.99,"quantity":12,"image_file":"/images/taco_seasoned_salmon.png","ingredients":"vegetable oil, Italian-seasoned bread crumbs, taco seasoning, salmon"},{"name":"Prosciutto and Asparagus Pasta","prod_description":"Prosciutto-wrapped asparagus is a classic appetizer. With pasta, it becomes dinner","price":24.99,"quantity":20,"image_file":"/images/prosciutto_and_asparagus_pasta","ingredients":"asparagus, prosciutto, olive oil, green onions, linguine"},{"name":"Sheet Pan Vegetable Dinner with Feta","prod_description":"Great with bread and salad","price":14.99,"quantity":25,"image_file":"/images/vegetable_dinner_with_feta.png","ingredients":"olive oil, zucchini, carrots, red bell peppers, potatoes, tomatoes, black olives, green onions, garlic, oregano, thyme, salt, black pepper, rosemary, bay leaves, feta cheese"},{"name":"Vegetarian Sheet Pan Dinner with Chickpeas and Veggies","prod_description":"Delicious vegetarian choice for dinner","price":14.99,"quantity":20,"image_file":"/images/vegetarian_dinner_chickpeas_veggies.png","ingredients":"chickpeas, butternut squash, onion, sweet potato, carrots, potatoes, vegetable oil, salt, black pepper, onion powder, garlic powder, fennel seeds, sage"},{"name":"Mac and Cheese","prod_description":"Classic macaroni and cheese.","price":9.99,"quantity":40,"image_file":"/images/macaroni_and_cheese.png","ingredients":"water, macaroni, butter, all-purpose flour, milk, heavy whipping cream, Worcestershire sauce, black pepper, Cheddar cheese, panko bread crumbs, Italian seasoning, garlic salt"},{"name":"Baked Old Bay Salmon","prod_description":"Salmon with an Old Bay seasoning twist","price":18.99,"quantity":20,"image_file":"/images/baked_old_bay_salmon.png","ingredients":"salmon, mayonnaise, seafood seasoning"},{"name":"Chicken Nachos with Refried Beans","prod_description":"Nachos with refried beans.","price":11.99,"quantity":17,"image_file":"/images/chicken_nachos_refried_beans.png","ingredients":"tortilla chips, refried beans, chicken, jalapeno peppers, Cheddar cheese"},{"name":"Roasted Sausage and Vegetables Dinner","prod_description":"Roasted sausage and vegetables, cooked just the way you like them","price":14.99,"quantity":30,"image_file":"/images/roasted_sausage_vegetables_dinner","ingredients":"olive oil, pork sausage, potatoes, onion, yellow bell pepper, orange bell pepper, red bell pepper, zucchini, oregano, salt, black pepper"},{"name":"Broiled Lemon-Pepper Tilapia","prod_description":"Broiled lemon-pepper tilapia","price":16.99,"quantity":15,"image_file":"/images/broiled_lemon_pepper_tilapia.png","ingredients":"tilapia, parsley, lemon-pepper seasoning, salted butter, bread crumbs"},{"name":"Pineapple BBQ Pulled Pork","prod_description":"Pineapple BBQ Pulled Pork","price":21.99,"quantity":40,"image_file":"/images/pineapple_bbq_pulled_pork.png","ingredients":"pork, chicken broth, honey barbeque sauce, onion, pineapple"},{"name":"Honey-Chipotle Chicken","prod_description":"Shredded chicken, black beans, with honey-chipotle sauce","price":17.99,"quantity":40,"image_file":"/images/honey_chipotle_chicken.png","ingredients":"honey, garlic, chipotle peppers in adobo sauce, chicken, black beans"},{"name":"Baked Spaghetti","prod_description":"Delicious with crusty garlic bread","price":12.99,"quantity":15,"image_file":"/images/baked_spaghetti.png","ingredients":"butter, onion, kosher salt, Italian seasoning, garlic, beef, marinara sauce, basil, spaghetti, heavy cream, Parmesan cheese, mozzarella cheese"}]');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/products.js"));
module.exports = __webpack_exports__;

})();
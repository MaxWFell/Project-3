"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/register";
exports.ids = ["pages/api/register"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "(api)/./db/db.js":
/*!******************!*\
  !*** ./db/db.js ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addOrder\": () => (/* binding */ addOrder),\n/* harmony export */   \"addToCart\": () => (/* binding */ addToCart),\n/* harmony export */   \"addToWishlist\": () => (/* binding */ addToWishlist),\n/* harmony export */   \"clearCart\": () => (/* binding */ clearCart),\n/* harmony export */   \"clearWishlist\": () => (/* binding */ clearWishlist),\n/* harmony export */   \"connectDatabase\": () => (/* binding */ connectDatabase),\n/* harmony export */   \"deleteOrder\": () => (/* binding */ deleteOrder),\n/* harmony export */   \"deletePet\": () => (/* binding */ deletePet),\n/* harmony export */   \"ensureCollections\": () => (/* binding */ ensureCollections),\n/* harmony export */   \"getCart\": () => (/* binding */ getCart),\n/* harmony export */   \"getOrders\": () => (/* binding */ getOrders),\n/* harmony export */   \"getPet\": () => (/* binding */ getPet),\n/* harmony export */   \"getPets\": () => (/* binding */ getPets),\n/* harmony export */   \"getProduct\": () => (/* binding */ getProduct),\n/* harmony export */   \"getProducts\": () => (/* binding */ getProducts),\n/* harmony export */   \"getSeed\": () => (/* binding */ getSeed),\n/* harmony export */   \"getUser\": () => (/* binding */ getUser),\n/* harmony export */   \"getWishlist\": () => (/* binding */ getWishlist),\n/* harmony export */   \"insertPet\": () => (/* binding */ insertPet),\n/* harmony export */   \"insertSeed\": () => (/* binding */ insertSeed),\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser),\n/* harmony export */   \"removeFromCart\": () => (/* binding */ removeFromCart),\n/* harmony export */   \"removeFromWishlist\": () => (/* binding */ removeFromWishlist),\n/* harmony export */   \"searchProducts\": () => (/* binding */ searchProducts),\n/* harmony export */   \"validateLogin\": () => (/* binding */ validateLogin)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MongoClient = (__webpack_require__(/*! mongodb */ \"mongodb\").MongoClient);\nconst seedproducts = __webpack_require__(/*! ./productsData.json */ \"(api)/./db/productsData.json\");\n// const ObjectID = require('mongodb').ObjectID;\n// get mongo client\nasync function connectDatabase() {\n    const client = await MongoClient.connect(process.env.MONGODB_URI);\n    return client;\n}\nasync function ensureCollections(client) {\n    // list of collections to ensure\n    const collections = [\n        \"users\",\n        \"products\",\n        \"orders\",\n        \"seeds\",\n        \"cart\",\n        \"wishlist\",\n        \"users_pets\"\n    ];\n    // get db\n    const db = client.db();\n    // ensure collections\n    for (const collection of collections){\n        // check if collection exists\n        const exists = await db.listCollections({\n            name: collection\n        }).hasNext();\n        // if not, create it\n        if (!exists) {\n            await db.createCollection(collection);\n        }\n    }\n    // get seed: products_seed\n    const seed = await getSeed(db, \"products_seed\");\n    // if seed doesn't exist, insert it\n    if (!seed) {\n        // seed products\n        await seedProducts(db, seedproducts);\n        // create indexes: products -> name\n        await db.collection(\"products\").createIndex({\n            name: \"text\"\n        });\n        // insert seed\n        await insertSeed(db, {\n            name: \"products_seed\",\n            date: new Date()\n        });\n    }\n}\n// insert pet\nasync function insertPet(db, pet) {\n    // get pets collection\n    const pets = db.collection(\"users_pets\");\n    // insert pet\n    const result = await pets.insertOne(pet);\n    return result;\n}\n// get pet by id\nasync function getPet(db, id) {\n    const collection = db.collection(\"users_pets\");\n    const pet = await collection.findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return pet;\n}\n// get pets by user id\nasync function getPets(db, user_id) {\n    const collection = db.collection(\"users_pets\");\n    const pets = await collection.find({\n        user_id\n    }).toArray();\n    return pets;\n}\n// delete pet by id\nasync function deletePet(db, id) {\n    const collection = db.collection(\"users_pets\");\n    const result = await collection.deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return result;\n}\n// insert user: name, email, password\nasync function insertUser(db, user) {\n    // get users collection\n    const users = db.collection(\"users\");\n    // insert user\n    const result = await users.insertOne(user);\n    return result;\n}\n// get user by email\nasync function getUser(db, email) {\n    const collection = db.collection(\"users\");\n    const result = await collection.findOne({\n        email\n    });\n    return result;\n}\n// validate login\nasync function validateLogin(db, email, password) {\n    // get user\n    const user = await getUser(db, email);\n    // if user exists, check password\n    if (user) {\n        return user.password === password;\n    }\n    // user doesn't exist\n    return false;\n}\n// insert seed: name, date run\nasync function insertSeed(db, seed) {\n    // get seeds collection\n    const seeds = db.collection(\"seeds\");\n    // insert seed\n    const result = await seeds.insertOne(seed);\n    return result;\n}\n// get seed by name\nasync function getSeed(db, name) {\n    const collection = db.collection(\"seeds\");\n    const seed = await collection.findOne({\n        name\n    });\n    return seed;\n}\n// seed products\nasync function seedProducts(db, prods) {\n    // get products collection\n    const products = db.collection(\"products\");\n    // insert products\n    const result = await products.insertMany(prods);\n    return result;\n}\n// get products\nasync function getProducts(db, filter) {\n    const collection = db.collection(\"products\");\n    const products = await collection.find(filter).toArray();\n    return products;\n}\n// get product by id\nasync function getProduct(db, id) {\n    const collection = db.collection(\"products\");\n    const product = await collection.findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    return product;\n}\n// search products\nasync function searchProducts(db, query) {\n    const collection = db.collection(\"products\");\n    const products = await collection.find({\n        $text: {\n            $search: query\n        }\n    }).toArray();\n    return products;\n}\n// get a users cart\nasync function getCart(db, user_id) {\n    const collection = db.collection(\"cart\");\n    const cart = await collection.findOne({\n        user_id\n    });\n    // if cart exists, return it\n    if (cart) {\n        return cart;\n    } else {\n        // if cart doesn't exist, create it\n        const newCart = {\n            user_id,\n            products: []\n        };\n        // insert new cart\n        await collection.insertOne(newCart);\n        return newCart;\n    }\n}\n// add product to cart\nasync function addToCart(db, user_id, product_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if product is already in cart, increment quantity\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products[index].quantity++;\n    } else {\n        // if product is not in cart, add it\n        products.push({\n            product_id,\n            quantity: 1\n        });\n    }\n    // update cart\n    const collection = db.collection(\"cart\");\n    const result = await collection.updateOne({\n        user_id\n    }, {\n        $set: {\n            products\n        }\n    });\n    return result;\n}\n// remove product from cart\nasync function removeFromCart(db, user_id, product_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if product is in cart, remove it\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products.splice(index, 1);\n        // update cart\n        const collection = db.collection(\"cart\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        console.log(result);\n        return result;\n    }\n    return null;\n}\n// clear cart\nasync function clearCart(db, user_id) {\n    // get cart\n    const cart = await getCart(db, user_id);\n    // get cart products\n    const products = cart.products;\n    // if cart has products, remove them\n    if (products.length > 0) {\n        // update cart\n        const collection = db.collection(\"cart\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products: []\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// get a users wishlist\nasync function getWishlist(db, user_id) {\n    const collection = db.collection(\"wishlist\");\n    // get wishlist\n    const list = await collection.findOne({\n        user_id\n    });\n    // if wishlist exists, return it\n    if (list) {\n        return list;\n    } else {\n        // if wishlist doesn't exist, create it\n        const newList = {\n            user_id,\n            products: []\n        };\n        // insert new wishlist\n        await collection.insertOne(newList);\n        return newList;\n    }\n}\n// add product to wishlist\nasync function addToWishlist(db, user_id, product_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if product is already in wishlist, do nothing\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index === -1) {\n        // if product is not in wishlist, add it\n        products.push({\n            product_id\n        });\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// remove product from wishlist\nasync function removeFromWishlist(db, user_id, product_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if product is in wishlist, remove it\n    const index = products.findIndex((product)=>product.product_id === product_id);\n    if (index !== -1) {\n        products.splice(index, 1);\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// clear wishlist\nasync function clearWishlist(db, user_id) {\n    // get wishlist\n    const list = await getWishlist(db, user_id);\n    // get wishlist products\n    const products = list.products;\n    // if wishlist has products, remove them\n    if (products.length > 0) {\n        // update wishlist\n        const collection = db.collection(\"wishlist\");\n        const result = await collection.updateOne({\n            user_id\n        }, {\n            $set: {\n                products: []\n            }\n        });\n        return result;\n    }\n    return null;\n}\n// get a users orders\nasync function getOrders(db, user_id) {\n    const collection = db.collection(\"orders\");\n    // get orders: order by date, newest first\n    const orders = await collection.find({\n        user_id\n    }).sort({\n        date: -1\n    }).toArray();\n    return orders;\n}\n// add order\nasync function addOrder(db, order) {\n    // get orders collection\n    const orders = db.collection(\"orders\");\n    // insert order\n    const result = await orders.insertOne(order);\n    return result;\n}\n// delete order\nasync function deleteOrder(db, order_id) {\n    // get orders collection\n    const orders = db.collection(\"orders\");\n    // delete order\n    const result = await orders.deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(order_id)\n    });\n    return result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYi9kYi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUM7QUFFbkMsTUFBTUMsY0FBY0MsMkRBQThCO0FBRWxELE1BQU1DLGVBQWVELG1CQUFPQSxDQUFDO0FBRTdCLGdEQUFnRDtBQUVoRCxtQkFBbUI7QUFDbkIsZUFBZUUsa0JBQWtCO0lBQzdCLE1BQU1DLFNBQVMsTUFBTUosWUFBWUssT0FBTyxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFdBQVc7SUFFaEUsT0FBT0o7QUFDWDtBQUVBLGVBQWVLLGtCQUFrQkwsTUFBTSxFQUFFO0lBQ3JDLGdDQUFnQztJQUNoQyxNQUFNTSxjQUFjO1FBQUM7UUFBUztRQUFZO1FBQVU7UUFBUztRQUFRO1FBQVk7S0FBYTtJQUU5RixTQUFTO0lBQ1QsTUFBTUMsS0FBS1AsT0FBT08sRUFBRTtJQUVwQixxQkFBcUI7SUFDckIsS0FBSyxNQUFNQyxjQUFjRixZQUFhO1FBQ2xDLDZCQUE2QjtRQUM3QixNQUFNRyxTQUFTLE1BQU1GLEdBQUdHLGVBQWUsQ0FBQztZQUFFQyxNQUFNSDtRQUFXLEdBQUdJLE9BQU87UUFFckUsb0JBQW9CO1FBQ3BCLElBQUksQ0FBQ0gsUUFBUTtZQUNULE1BQU1GLEdBQUdNLGdCQUFnQixDQUFDTDtRQUM5QixDQUFDO0lBQ0w7SUFHQSwwQkFBMEI7SUFDMUIsTUFBTU0sT0FBTyxNQUFNQyxRQUFRUixJQUFJO0lBRS9CLG1DQUFtQztJQUNuQyxJQUFJLENBQUNPLE1BQU07UUFDUCxnQkFBZ0I7UUFDaEIsTUFBTUUsYUFBYVQsSUFBSVQ7UUFFdkIsbUNBQW1DO1FBQ25DLE1BQU1TLEdBQUdDLFVBQVUsQ0FBQyxZQUFZUyxXQUFXLENBQUM7WUFBRU4sTUFBTTtRQUFPO1FBRTNELGNBQWM7UUFDZCxNQUFNTyxXQUFXWCxJQUFJO1lBQ2pCSSxNQUFNO1lBQ05RLE1BQU0sSUFBSUM7UUFDZDtJQUNKLENBQUM7QUFDTDtBQUVBLGFBQWE7QUFDYixlQUFlQyxVQUFVZCxFQUFFLEVBQUVlLEdBQUcsRUFBRTtJQUM5QixzQkFBc0I7SUFDdEIsTUFBTUMsT0FBT2hCLEdBQUdDLFVBQVUsQ0FBQztJQUUzQixhQUFhO0lBQ2IsTUFBTWdCLFNBQVMsTUFBTUQsS0FBS0UsU0FBUyxDQUFDSDtJQUVwQyxPQUFPRTtBQUNYO0FBRUEsZ0JBQWdCO0FBQ2hCLGVBQWVFLE9BQU9uQixFQUFFLEVBQUVvQixFQUFFLEVBQUU7SUFDMUIsTUFBTW5CLGFBQWFELEdBQUdDLFVBQVUsQ0FBQztJQUVqQyxNQUFNYyxNQUFNLE1BQU1kLFdBQVdvQixPQUFPLENBQUM7UUFBRUMsS0FBSyxJQUFJbEMsNkNBQVFBLENBQUNnQztJQUFJO0lBRTdELE9BQU9MO0FBQ1g7QUFFQSxzQkFBc0I7QUFDdEIsZUFBZVEsUUFBUXZCLEVBQUUsRUFBRXdCLE9BQU8sRUFBRTtJQUNoQyxNQUFNdkIsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO0lBRWpDLE1BQU1lLE9BQU8sTUFBTWYsV0FBV3dCLElBQUksQ0FBQztRQUFFRDtJQUFRLEdBQUdFLE9BQU87SUFFdkQsT0FBT1Y7QUFDWDtBQUVBLG1CQUFtQjtBQUNuQixlQUFlVyxVQUFVM0IsRUFBRSxFQUFFb0IsRUFBRSxFQUFFO0lBQzdCLE1BQU1uQixhQUFhRCxHQUFHQyxVQUFVLENBQUM7SUFFakMsTUFBTWdCLFNBQVMsTUFBTWhCLFdBQVcyQixTQUFTLENBQUM7UUFBRU4sS0FBSyxJQUFJbEMsNkNBQVFBLENBQUNnQztJQUFJO0lBRWxFLE9BQU9IO0FBQ1g7QUFFQSxxQ0FBcUM7QUFDckMsZUFBZVksV0FBVzdCLEVBQUUsRUFBRThCLElBQUksRUFBRTtJQUNoQyx1QkFBdUI7SUFDdkIsTUFBTUMsUUFBUS9CLEdBQUdDLFVBQVUsQ0FBQztJQUU1QixjQUFjO0lBQ2QsTUFBTWdCLFNBQVMsTUFBTWMsTUFBTWIsU0FBUyxDQUFDWTtJQUVyQyxPQUFPYjtBQUNYO0FBRUEsb0JBQW9CO0FBQ3BCLGVBQWVlLFFBQVFoQyxFQUFFLEVBQUVpQyxLQUFLLEVBQUU7SUFDOUIsTUFBTWhDLGFBQWFELEdBQUdDLFVBQVUsQ0FBQztJQUNqQyxNQUFNZ0IsU0FBUyxNQUFNaEIsV0FBV29CLE9BQU8sQ0FBQztRQUFFWTtJQUFNO0lBRWhELE9BQU9oQjtBQUNYO0FBRUEsaUJBQWlCO0FBQ2pCLGVBQWVpQixjQUFjbEMsRUFBRSxFQUFFaUMsS0FBSyxFQUFFRSxRQUFRLEVBQUU7SUFDOUMsV0FBVztJQUNYLE1BQU1MLE9BQU8sTUFBTUUsUUFBUWhDLElBQUlpQztJQUUvQixpQ0FBaUM7SUFDakMsSUFBSUgsTUFBTTtRQUNOLE9BQU9BLEtBQUtLLFFBQVEsS0FBS0E7SUFDN0IsQ0FBQztJQUVELHFCQUFxQjtJQUNyQixPQUFPLEtBQUs7QUFDaEI7QUFFQSw4QkFBOEI7QUFDOUIsZUFBZXhCLFdBQVdYLEVBQUUsRUFBRU8sSUFBSSxFQUFFO0lBQ2hDLHVCQUF1QjtJQUN2QixNQUFNNkIsUUFBUXBDLEdBQUdDLFVBQVUsQ0FBQztJQUU1QixjQUFjO0lBQ2QsTUFBTWdCLFNBQVMsTUFBTW1CLE1BQU1sQixTQUFTLENBQUNYO0lBRXJDLE9BQU9VO0FBQ1g7QUFFQSxtQkFBbUI7QUFDbkIsZUFBZVQsUUFBUVIsRUFBRSxFQUFFSSxJQUFJLEVBQUU7SUFDN0IsTUFBTUgsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO0lBRWpDLE1BQU1NLE9BQU8sTUFBTU4sV0FBV29CLE9BQU8sQ0FBQztRQUFFakI7SUFBSztJQUU3QyxPQUFPRztBQUNYO0FBRUEsZ0JBQWdCO0FBQ2hCLGVBQWVFLGFBQWFULEVBQUUsRUFBRXFDLEtBQUssRUFBRTtJQUNuQywwQkFBMEI7SUFDMUIsTUFBTUMsV0FBV3RDLEdBQUdDLFVBQVUsQ0FBQztJQUUvQixrQkFBa0I7SUFDbEIsTUFBTWdCLFNBQVMsTUFBTXFCLFNBQVNDLFVBQVUsQ0FBQ0Y7SUFFekMsT0FBT3BCO0FBQ1g7QUFFQSxlQUFlO0FBQ2YsZUFBZXVCLFlBQVl4QyxFQUFFLEVBQUV5QyxNQUFNLEVBQUU7SUFDbkMsTUFBTXhDLGFBQWFELEdBQUdDLFVBQVUsQ0FBQztJQUVqQyxNQUFNcUMsV0FBVyxNQUFNckMsV0FBV3dCLElBQUksQ0FBQ2dCLFFBQVFmLE9BQU87SUFFdEQsT0FBT1k7QUFDWDtBQUVBLG9CQUFvQjtBQUNwQixlQUFlSSxXQUFXMUMsRUFBRSxFQUFFb0IsRUFBRSxFQUFFO0lBQzlCLE1BQU1uQixhQUFhRCxHQUFHQyxVQUFVLENBQUM7SUFFakMsTUFBTTBDLFVBQVUsTUFBTTFDLFdBQVdvQixPQUFPLENBQUM7UUFBRUMsS0FBSyxJQUFJbEMsNkNBQVFBLENBQUNnQztJQUFJO0lBRWpFLE9BQU91QjtBQUNYO0FBRUEsa0JBQWtCO0FBQ2xCLGVBQWVDLGVBQWU1QyxFQUFFLEVBQUU2QyxLQUFLLEVBQUU7SUFDckMsTUFBTTVDLGFBQWFELEdBQUdDLFVBQVUsQ0FBQztJQUVqQyxNQUFNcUMsV0FBVyxNQUFNckMsV0FBV3dCLElBQUksQ0FBQztRQUFFcUIsT0FBTztZQUFFQyxTQUFTRjtRQUFNO0lBQUUsR0FBR25CLE9BQU87SUFFN0UsT0FBT1k7QUFDWDtBQUVBLG1CQUFtQjtBQUNuQixlQUFlVSxRQUFRaEQsRUFBRSxFQUFFd0IsT0FBTyxFQUFFO0lBQ2hDLE1BQU12QixhQUFhRCxHQUFHQyxVQUFVLENBQUM7SUFFakMsTUFBTWdELE9BQU8sTUFBTWhELFdBQVdvQixPQUFPLENBQUM7UUFBRUc7SUFBUTtJQUVoRCw0QkFBNEI7SUFDNUIsSUFBSXlCLE1BQU07UUFDTixPQUFPQTtJQUNYLE9BQU87UUFDSCxtQ0FBbUM7UUFDbkMsTUFBTUMsVUFBVTtZQUNaMUI7WUFDQWMsVUFBVSxFQUFFO1FBQ2hCO1FBRUEsa0JBQWtCO1FBQ2xCLE1BQU1yQyxXQUFXaUIsU0FBUyxDQUFDZ0M7UUFFM0IsT0FBT0E7SUFDWCxDQUFDO0FBQ0w7QUFFQSxzQkFBc0I7QUFDdEIsZUFBZUMsVUFBVW5ELEVBQUUsRUFBRXdCLE9BQU8sRUFBRTRCLFVBQVUsRUFBRTtJQUM5QyxXQUFXO0lBQ1gsTUFBTUgsT0FBTyxNQUFNRCxRQUFRaEQsSUFBSXdCO0lBRS9CLG9CQUFvQjtJQUNwQixNQUFNYyxXQUFXVyxLQUFLWCxRQUFRO0lBRTlCLG9EQUFvRDtJQUNwRCxNQUFNZSxRQUFRZixTQUFTZ0IsU0FBUyxDQUFDLENBQUNYLFVBQVlBLFFBQVFTLFVBQVUsS0FBS0E7SUFFckUsSUFBSUMsVUFBVSxDQUFDLEdBQUc7UUFDZGYsUUFBUSxDQUFDZSxNQUFNLENBQUNFLFFBQVE7SUFDNUIsT0FBTztRQUNILG9DQUFvQztRQUNwQ2pCLFNBQVNrQixJQUFJLENBQUM7WUFDVko7WUFDQUcsVUFBVTtRQUNkO0lBQ0osQ0FBQztJQUVELGNBQWM7SUFDZCxNQUFNdEQsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO0lBRWpDLE1BQU1nQixTQUFTLE1BQU1oQixXQUFXd0QsU0FBUyxDQUNyQztRQUFFakM7SUFBUSxHQUNWO1FBQUVrQyxNQUFNO1lBQUVwQjtRQUFTO0lBQUU7SUFHekIsT0FBT3JCO0FBQ1g7QUFFQSwyQkFBMkI7QUFDM0IsZUFBZTBDLGVBQWUzRCxFQUFFLEVBQUV3QixPQUFPLEVBQUU0QixVQUFVLEVBQUU7SUFDbkQsV0FBVztJQUNYLE1BQU1ILE9BQU8sTUFBTUQsUUFBUWhELElBQUl3QjtJQUUvQixvQkFBb0I7SUFDcEIsTUFBTWMsV0FBV1csS0FBS1gsUUFBUTtJQUU5QixtQ0FBbUM7SUFDbkMsTUFBTWUsUUFBUWYsU0FBU2dCLFNBQVMsQ0FBQyxDQUFDWCxVQUFZQSxRQUFRUyxVQUFVLEtBQUtBO0lBRXJFLElBQUlDLFVBQVUsQ0FBQyxHQUFHO1FBQ2RmLFNBQVNzQixNQUFNLENBQUNQLE9BQU87UUFFdkIsY0FBYztRQUNkLE1BQU1wRCxhQUFhRCxHQUFHQyxVQUFVLENBQUM7UUFFakMsTUFBTWdCLFNBQVMsTUFBTWhCLFdBQVd3RCxTQUFTLENBQ3JDO1lBQUVqQztRQUFRLEdBQ1Y7WUFBRWtDLE1BQU07Z0JBQUVwQjtZQUFTO1FBQUU7UUFHekJ1QixRQUFRQyxHQUFHLENBQUM3QztRQUVaLE9BQU9BO0lBQ1gsQ0FBQztJQUVELE9BQU8sSUFBSTtBQUNmO0FBRUEsYUFBYTtBQUNiLGVBQWU4QyxVQUFVL0QsRUFBRSxFQUFFd0IsT0FBTyxFQUFFO0lBQ2xDLFdBQVc7SUFDWCxNQUFNeUIsT0FBTyxNQUFNRCxRQUFRaEQsSUFBSXdCO0lBRS9CLG9CQUFvQjtJQUNwQixNQUFNYyxXQUFXVyxLQUFLWCxRQUFRO0lBRTlCLG9DQUFvQztJQUNwQyxJQUFJQSxTQUFTMEIsTUFBTSxHQUFHLEdBQUc7UUFDckIsY0FBYztRQUNkLE1BQU0vRCxhQUFhRCxHQUFHQyxVQUFVLENBQUM7UUFFakMsTUFBTWdCLFNBQVMsTUFBTWhCLFdBQVd3RCxTQUFTLENBQ3JDO1lBQUVqQztRQUFRLEdBQ1Y7WUFBRWtDLE1BQU07Z0JBQUVwQixVQUFVLEVBQUU7WUFBQztRQUFFO1FBRzdCLE9BQU9yQjtJQUNYLENBQUM7SUFFRCxPQUFPLElBQUk7QUFDZjtBQUVBLHVCQUF1QjtBQUN2QixlQUFlZ0QsWUFBWWpFLEVBQUUsRUFBRXdCLE9BQU8sRUFBRTtJQUNwQyxNQUFNdkIsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO0lBRWpDLGVBQWU7SUFDZixNQUFNaUUsT0FBTyxNQUFNakUsV0FBV29CLE9BQU8sQ0FBQztRQUFFRztJQUFRO0lBRWhELGdDQUFnQztJQUNoQyxJQUFJMEMsTUFBTTtRQUNOLE9BQU9BO0lBQ1gsT0FBTztRQUNILHVDQUF1QztRQUN2QyxNQUFNQyxVQUFVO1lBQ1ozQztZQUNBYyxVQUFVLEVBQUU7UUFDaEI7UUFFQSxzQkFBc0I7UUFDdEIsTUFBTXJDLFdBQVdpQixTQUFTLENBQUNpRDtRQUUzQixPQUFPQTtJQUNYLENBQUM7QUFFTDtBQUVBLDBCQUEwQjtBQUMxQixlQUFlQyxjQUFjcEUsRUFBRSxFQUFFd0IsT0FBTyxFQUFFNEIsVUFBVSxFQUFFO0lBQ2xELGVBQWU7SUFDZixNQUFNYyxPQUFPLE1BQU1ELFlBQVlqRSxJQUFJd0I7SUFFbkMsd0JBQXdCO0lBQ3hCLE1BQU1jLFdBQVc0QixLQUFLNUIsUUFBUTtJQUU5QixnREFBZ0Q7SUFDaEQsTUFBTWUsUUFBUWYsU0FBU2dCLFNBQVMsQ0FBQyxDQUFDWCxVQUFZQSxRQUFRUyxVQUFVLEtBQUtBO0lBRXJFLElBQUlDLFVBQVUsQ0FBQyxHQUFHO1FBQ2Qsd0NBQXdDO1FBQ3hDZixTQUFTa0IsSUFBSSxDQUFDO1lBQ1ZKO1FBQ0o7UUFFQSxrQkFBa0I7UUFDbEIsTUFBTW5ELGFBQWFELEdBQUdDLFVBQVUsQ0FBQztRQUVqQyxNQUFNZ0IsU0FBUyxNQUFNaEIsV0FBV3dELFNBQVMsQ0FDckM7WUFBRWpDO1FBQVEsR0FDVjtZQUFFa0MsTUFBTTtnQkFBRXBCO1lBQVM7UUFBRTtRQUd6QixPQUFPckI7SUFDWCxDQUFDO0lBRUQsT0FBTyxJQUFJO0FBQ2Y7QUFFQSwrQkFBK0I7QUFDL0IsZUFBZW9ELG1CQUFtQnJFLEVBQUUsRUFBRXdCLE9BQU8sRUFBRTRCLFVBQVUsRUFBRTtJQUN2RCxlQUFlO0lBQ2YsTUFBTWMsT0FBTyxNQUFNRCxZQUFZakUsSUFBSXdCO0lBRW5DLHdCQUF3QjtJQUN4QixNQUFNYyxXQUFXNEIsS0FBSzVCLFFBQVE7SUFFOUIsdUNBQXVDO0lBQ3ZDLE1BQU1lLFFBQVFmLFNBQVNnQixTQUFTLENBQUMsQ0FBQ1gsVUFBWUEsUUFBUVMsVUFBVSxLQUFLQTtJQUVyRSxJQUFJQyxVQUFVLENBQUMsR0FBRztRQUNkZixTQUFTc0IsTUFBTSxDQUFDUCxPQUFPO1FBRXZCLGtCQUFrQjtRQUNsQixNQUFNcEQsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO1FBRWpDLE1BQU1nQixTQUFTLE1BQU1oQixXQUFXd0QsU0FBUyxDQUNyQztZQUFFakM7UUFBUSxHQUNWO1lBQUVrQyxNQUFNO2dCQUFFcEI7WUFBUztRQUFFO1FBR3pCLE9BQU9yQjtJQUNYLENBQUM7SUFFRCxPQUFPLElBQUk7QUFDZjtBQUVBLGlCQUFpQjtBQUNqQixlQUFlcUQsY0FBY3RFLEVBQUUsRUFBRXdCLE9BQU8sRUFBRTtJQUN0QyxlQUFlO0lBQ2YsTUFBTTBDLE9BQU8sTUFBTUQsWUFBWWpFLElBQUl3QjtJQUVuQyx3QkFBd0I7SUFDeEIsTUFBTWMsV0FBVzRCLEtBQUs1QixRQUFRO0lBRTlCLHdDQUF3QztJQUN4QyxJQUFJQSxTQUFTMEIsTUFBTSxHQUFHLEdBQUc7UUFDckIsa0JBQWtCO1FBQ2xCLE1BQU0vRCxhQUFhRCxHQUFHQyxVQUFVLENBQUM7UUFFakMsTUFBTWdCLFNBQVMsTUFBTWhCLFdBQVd3RCxTQUFTLENBQ3JDO1lBQUVqQztRQUFRLEdBQ1Y7WUFBRWtDLE1BQU07Z0JBQUVwQixVQUFVLEVBQUU7WUFBQztRQUFFO1FBRzdCLE9BQU9yQjtJQUNYLENBQUM7SUFFRCxPQUFPLElBQUk7QUFDZjtBQUVBLHFCQUFxQjtBQUNyQixlQUFlc0QsVUFBVXZFLEVBQUUsRUFBRXdCLE9BQU8sRUFBRTtJQUNsQyxNQUFNdkIsYUFBYUQsR0FBR0MsVUFBVSxDQUFDO0lBRWpDLDBDQUEwQztJQUMxQyxNQUFNdUUsU0FBUyxNQUFNdkUsV0FBV3dCLElBQUksQ0FBQztRQUFFRDtJQUFRLEdBQUdpRCxJQUFJLENBQUM7UUFBRTdELE1BQU0sQ0FBQztJQUFFLEdBQUdjLE9BQU87SUFFNUUsT0FBTzhDO0FBQ1g7QUFFQSxZQUFZO0FBQ1osZUFBZUUsU0FBUzFFLEVBQUUsRUFBRTJFLEtBQUssRUFBRTtJQUMvQix3QkFBd0I7SUFDeEIsTUFBTUgsU0FBU3hFLEdBQUdDLFVBQVUsQ0FBQztJQUM3QixlQUFlO0lBQ2YsTUFBTWdCLFNBQVMsTUFBTXVELE9BQU90RCxTQUFTLENBQUN5RDtJQUV0QyxPQUFPMUQ7QUFDWDtBQUVBLGVBQWU7QUFDZixlQUFlMkQsWUFBWTVFLEVBQUUsRUFBRTZFLFFBQVEsRUFBRTtJQUNyQyx3QkFBd0I7SUFDeEIsTUFBTUwsU0FBU3hFLEdBQUdDLFVBQVUsQ0FBQztJQUU3QixlQUFlO0lBQ2YsTUFBTWdCLFNBQVMsTUFBTXVELE9BQU81QyxTQUFTLENBQUM7UUFBRU4sS0FBSyxJQUFJbEMsNkNBQVFBLENBQUN5RjtJQUFVO0lBRXBFLE9BQU81RDtBQUNYO0FBNkJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2l0aXZlbHkvLi9kYi9kYi5qcz81ZDI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XG5cbmNvbnN0IE1vbmdvQ2xpZW50ID0gcmVxdWlyZSgnbW9uZ29kYicpLk1vbmdvQ2xpZW50O1xuXG5jb25zdCBzZWVkcHJvZHVjdHMgPSByZXF1aXJlKCcuL3Byb2R1Y3RzRGF0YS5qc29uJyk7XG5cbi8vIGNvbnN0IE9iamVjdElEID0gcmVxdWlyZSgnbW9uZ29kYicpLk9iamVjdElEO1xuXG4vLyBnZXQgbW9uZ28gY2xpZW50XG5hc3luYyBmdW5jdGlvbiBjb25uZWN0RGF0YWJhc2UoKSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgTW9uZ29DbGllbnQuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSk7XG5cbiAgICByZXR1cm4gY2xpZW50O1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVDb2xsZWN0aW9ucyhjbGllbnQpIHtcbiAgICAvLyBsaXN0IG9mIGNvbGxlY3Rpb25zIHRvIGVuc3VyZVxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gWyd1c2VycycsICdwcm9kdWN0cycsICdvcmRlcnMnLCAnc2VlZHMnLCAnY2FydCcsICd3aXNobGlzdCcsICd1c2Vyc19wZXRzJ107XG5cbiAgICAvLyBnZXQgZGJcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuXG4gICAgLy8gZW5zdXJlIGNvbGxlY3Rpb25zXG4gICAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIGNvbGxlY3Rpb25zKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIGNvbGxlY3Rpb24gZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGRiLmxpc3RDb2xsZWN0aW9ucyh7IG5hbWU6IGNvbGxlY3Rpb24gfSkuaGFzTmV4dCgpO1xuXG4gICAgICAgIC8vIGlmIG5vdCwgY3JlYXRlIGl0XG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5jcmVhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG4gICAgLy8gZ2V0IHNlZWQ6IHByb2R1Y3RzX3NlZWRcbiAgICBjb25zdCBzZWVkID0gYXdhaXQgZ2V0U2VlZChkYiwgJ3Byb2R1Y3RzX3NlZWQnKTtcbiAgICBcbiAgICAvLyBpZiBzZWVkIGRvZXNuJ3QgZXhpc3QsIGluc2VydCBpdFxuICAgIGlmICghc2VlZCkge1xuICAgICAgICAvLyBzZWVkIHByb2R1Y3RzXG4gICAgICAgIGF3YWl0IHNlZWRQcm9kdWN0cyhkYiwgc2VlZHByb2R1Y3RzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNyZWF0ZSBpbmRleGVzOiBwcm9kdWN0cyAtPiBuYW1lXG4gICAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJykuY3JlYXRlSW5kZXgoeyBuYW1lOiAndGV4dCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbnNlcnQgc2VlZFxuICAgICAgICBhd2FpdCBpbnNlcnRTZWVkKGRiLCB7XG4gICAgICAgICAgICBuYW1lOiAncHJvZHVjdHNfc2VlZCcsXG4gICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIGluc2VydCBwZXRcbmFzeW5jIGZ1bmN0aW9uIGluc2VydFBldChkYiwgcGV0KSB7XG4gICAgLy8gZ2V0IHBldHMgY29sbGVjdGlvblxuICAgIGNvbnN0IHBldHMgPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICAvLyBpbnNlcnQgcGV0XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGV0cy5pbnNlcnRPbmUocGV0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGdldCBwZXQgYnkgaWRcbmFzeW5jIGZ1bmN0aW9uIGdldFBldChkYiwgaWQpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbigndXNlcnNfcGV0cycpO1xuXG4gICAgY29uc3QgcGV0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuXG4gICAgcmV0dXJuIHBldDtcbn1cblxuLy8gZ2V0IHBldHMgYnkgdXNlciBpZFxuYXN5bmMgZnVuY3Rpb24gZ2V0UGV0cyhkYiwgdXNlcl9pZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICBjb25zdCBwZXRzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHsgdXNlcl9pZCB9KS50b0FycmF5KCk7XG5cbiAgICByZXR1cm4gcGV0cztcbn1cblxuLy8gZGVsZXRlIHBldCBieSBpZFxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGV0KGRiLCBpZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd1c2Vyc19wZXRzJyk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElkKGlkKSB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGluc2VydCB1c2VyOiBuYW1lLCBlbWFpbCwgcGFzc3dvcmRcbmFzeW5jIGZ1bmN0aW9uIGluc2VydFVzZXIoZGIsIHVzZXIpIHtcbiAgICAvLyBnZXQgdXNlcnMgY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJzID0gZGIuY29sbGVjdGlvbigndXNlcnMnKTtcblxuICAgIC8vIGluc2VydCB1c2VyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlcnMuaW5zZXJ0T25lKHVzZXIpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZ2V0IHVzZXIgYnkgZW1haWxcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXIoZGIsIGVtYWlsKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgZW1haWwgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyB2YWxpZGF0ZSBsb2dpblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVMb2dpbihkYiwgZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgLy8gZ2V0IHVzZXJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlcihkYiwgZW1haWwpO1xuXG4gICAgLy8gaWYgdXNlciBleGlzdHMsIGNoZWNrIHBhc3N3b3JkXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHVzZXIucGFzc3dvcmQgPT09IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIC8vIHVzZXIgZG9lc24ndCBleGlzdFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gaW5zZXJ0IHNlZWQ6IG5hbWUsIGRhdGUgcnVuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRTZWVkKGRiLCBzZWVkKSB7XG4gICAgLy8gZ2V0IHNlZWRzIGNvbGxlY3Rpb25cbiAgICBjb25zdCBzZWVkcyA9IGRiLmNvbGxlY3Rpb24oJ3NlZWRzJyk7XG5cbiAgICAvLyBpbnNlcnQgc2VlZFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlZWRzLmluc2VydE9uZShzZWVkKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIGdldCBzZWVkIGJ5IG5hbWVcbmFzeW5jIGZ1bmN0aW9uIGdldFNlZWQoZGIsIG5hbWUpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignc2VlZHMnKTtcblxuICAgIGNvbnN0IHNlZWQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBuYW1lIH0pO1xuXG4gICAgcmV0dXJuIHNlZWQ7XG59XG5cbi8vIHNlZWQgcHJvZHVjdHNcbmFzeW5jIGZ1bmN0aW9uIHNlZWRQcm9kdWN0cyhkYiwgcHJvZHMpIHtcbiAgICAvLyBnZXQgcHJvZHVjdHMgY29sbGVjdGlvblxuICAgIGNvbnN0IHByb2R1Y3RzID0gZGIuY29sbGVjdGlvbigncHJvZHVjdHMnKTtcblxuICAgIC8vIGluc2VydCBwcm9kdWN0c1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2R1Y3RzLmluc2VydE1hbnkocHJvZHMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gZ2V0IHByb2R1Y3RzXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cyhkYiwgZmlsdGVyKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZChmaWx0ZXIpLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBwcm9kdWN0cztcbn1cblxuLy8gZ2V0IHByb2R1Y3QgYnkgaWRcbmFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3QoZGIsIGlkKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgY29sbGVjdGlvbi5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xuXG4gICAgcmV0dXJuIHByb2R1Y3Q7XG59XG5cbi8vIHNlYXJjaCBwcm9kdWN0c1xuYXN5bmMgZnVuY3Rpb24gc2VhcmNoUHJvZHVjdHMoZGIsIHF1ZXJ5KSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3Byb2R1Y3RzJyk7XG5cbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZCh7ICR0ZXh0OiB7ICRzZWFyY2g6IHF1ZXJ5IH0gfSkudG9BcnJheSgpO1xuXG4gICAgcmV0dXJuIHByb2R1Y3RzO1xufVxuXG4vLyBnZXQgYSB1c2VycyBjYXJ0XG5hc3luYyBmdW5jdGlvbiBnZXRDYXJ0KGRiLCB1c2VyX2lkKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ2NhcnQnKTtcblxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyX2lkIH0pO1xuXG4gICAgLy8gaWYgY2FydCBleGlzdHMsIHJldHVybiBpdFxuICAgIGlmIChjYXJ0KSB7XG4gICAgICAgIHJldHVybiBjYXJ0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIGNhcnQgZG9lc24ndCBleGlzdCwgY3JlYXRlIGl0XG4gICAgICAgIGNvbnN0IG5ld0NhcnQgPSB7XG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgcHJvZHVjdHM6IFtdLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGluc2VydCBuZXcgY2FydFxuICAgICAgICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShuZXdDYXJ0KTtcblxuICAgICAgICByZXR1cm4gbmV3Q2FydDtcbiAgICB9XG59XG5cbi8vIGFkZCBwcm9kdWN0IHRvIGNhcnRcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvQ2FydChkYiwgdXNlcl9pZCwgcHJvZHVjdF9pZCkge1xuICAgIC8vIGdldCBjYXJ0XG4gICAgY29uc3QgY2FydCA9IGF3YWl0IGdldENhcnQoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IGNhcnQgcHJvZHVjdHNcbiAgICBjb25zdCBwcm9kdWN0cyA9IGNhcnQucHJvZHVjdHM7XG5cbiAgICAvLyBpZiBwcm9kdWN0IGlzIGFscmVhZHkgaW4gY2FydCwgaW5jcmVtZW50IHF1YW50aXR5XG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHByb2R1Y3RzW2luZGV4XS5xdWFudGl0eSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIHByb2R1Y3QgaXMgbm90IGluIGNhcnQsIGFkZCBpdFxuICAgICAgICBwcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgICAgIHByb2R1Y3RfaWQsXG4gICAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGNhcnRcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignY2FydCcpO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHJlbW92ZSBwcm9kdWN0IGZyb20gY2FydFxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlRnJvbUNhcnQoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgY2FydFxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBnZXRDYXJ0KGRiLCB1c2VyX2lkKTtcblxuICAgIC8vIGdldCBjYXJ0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBjYXJ0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBpbiBjYXJ0LCByZW1vdmUgaXRcbiAgICBjb25zdCBpbmRleCA9IHByb2R1Y3RzLmZpbmRJbmRleCgocHJvZHVjdCkgPT4gcHJvZHVjdC5wcm9kdWN0X2lkID09PSBwcm9kdWN0X2lkKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgcHJvZHVjdHMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgICAvLyB1cGRhdGUgY2FydFxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignY2FydCcpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgICAgICAgeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBjbGVhciBjYXJ0XG5hc3luYyBmdW5jdGlvbiBjbGVhckNhcnQoZGIsIHVzZXJfaWQpIHtcbiAgICAvLyBnZXQgY2FydFxuICAgIGNvbnN0IGNhcnQgPSBhd2FpdCBnZXRDYXJ0KGRiLCB1c2VyX2lkKTtcblxuICAgIC8vIGdldCBjYXJ0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBjYXJ0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgY2FydCBoYXMgcHJvZHVjdHMsIHJlbW92ZSB0aGVtXG4gICAgaWYgKHByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gdXBkYXRlIGNhcnRcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ2NhcnQnKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICAgICAgeyAkc2V0OiB7IHByb2R1Y3RzOiBbXSB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBnZXQgYSB1c2VycyB3aXNobGlzdFxuYXN5bmMgZnVuY3Rpb24gZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignd2lzaGxpc3QnKTtcblxuICAgIC8vIGdldCB3aXNobGlzdFxuICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyB1c2VyX2lkIH0pO1xuXG4gICAgLy8gaWYgd2lzaGxpc3QgZXhpc3RzLCByZXR1cm4gaXRcbiAgICBpZiAobGlzdCkge1xuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiB3aXNobGlzdCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcbiAgICAgICAgY29uc3QgbmV3TGlzdCA9IHtcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBwcm9kdWN0czogW10sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaW5zZXJ0IG5ldyB3aXNobGlzdFxuICAgICAgICBhd2FpdCBjb2xsZWN0aW9uLmluc2VydE9uZShuZXdMaXN0KTtcblxuICAgICAgICByZXR1cm4gbmV3TGlzdDtcbiAgICB9XG5cbn1cblxuLy8gYWRkIHByb2R1Y3QgdG8gd2lzaGxpc3RcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvV2lzaGxpc3QoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBhbHJlYWR5IGluIHdpc2hsaXN0LCBkbyBub3RoaW5nXG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIC8vIGlmIHByb2R1Y3QgaXMgbm90IGluIHdpc2hsaXN0LCBhZGQgaXRcbiAgICAgICAgcHJvZHVjdHMucHVzaCh7XG4gICAgICAgICAgICBwcm9kdWN0X2lkLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyB1cGRhdGUgd2lzaGxpc3RcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3dpc2hsaXN0Jyk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICAgICAgICB7IHVzZXJfaWQgfSxcbiAgICAgICAgICAgIHsgJHNldDogeyBwcm9kdWN0cyB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyByZW1vdmUgcHJvZHVjdCBmcm9tIHdpc2hsaXN0XG5hc3luYyBmdW5jdGlvbiByZW1vdmVGcm9tV2lzaGxpc3QoZGIsIHVzZXJfaWQsIHByb2R1Y3RfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgcHJvZHVjdCBpcyBpbiB3aXNobGlzdCwgcmVtb3ZlIGl0XG4gICAgY29uc3QgaW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgoKHByb2R1Y3QpID0+IHByb2R1Y3QucHJvZHVjdF9pZCA9PT0gcHJvZHVjdF9pZCk7XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHByb2R1Y3RzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHdpc2hsaXN0XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCd3aXNobGlzdCcpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24udXBkYXRlT25lKFxuICAgICAgICAgICAgeyB1c2VyX2lkIH0sXG4gICAgICAgICAgICB7ICRzZXQ6IHsgcHJvZHVjdHMgfSB9XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLy8gY2xlYXIgd2lzaGxpc3RcbmFzeW5jIGZ1bmN0aW9uIGNsZWFyV2lzaGxpc3QoZGIsIHVzZXJfaWQpIHtcbiAgICAvLyBnZXQgd2lzaGxpc3RcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0V2lzaGxpc3QoZGIsIHVzZXJfaWQpO1xuXG4gICAgLy8gZ2V0IHdpc2hsaXN0IHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdHMgPSBsaXN0LnByb2R1Y3RzO1xuXG4gICAgLy8gaWYgd2lzaGxpc3QgaGFzIHByb2R1Y3RzLCByZW1vdmUgdGhlbVxuICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHVwZGF0ZSB3aXNobGlzdFxuICAgICAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbignd2lzaGxpc3QnKTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLnVwZGF0ZU9uZShcbiAgICAgICAgICAgIHsgdXNlcl9pZCB9LFxuICAgICAgICAgICAgeyAkc2V0OiB7IHByb2R1Y3RzOiBbXSB9IH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuXG4vLyBnZXQgYSB1c2VycyBvcmRlcnNcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZGVycyhkYiwgdXNlcl9pZCkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKCdvcmRlcnMnKTtcblxuICAgIC8vIGdldCBvcmRlcnM6IG9yZGVyIGJ5IGRhdGUsIG5ld2VzdCBmaXJzdFxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZCh7IHVzZXJfaWQgfSkuc29ydCh7IGRhdGU6IC0xIH0pLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBvcmRlcnM7XG59XG5cbi8vIGFkZCBvcmRlclxuYXN5bmMgZnVuY3Rpb24gYWRkT3JkZXIoZGIsIG9yZGVyKSB7XG4gICAgLy8gZ2V0IG9yZGVycyBjb2xsZWN0aW9uXG4gICAgY29uc3Qgb3JkZXJzID0gZGIuY29sbGVjdGlvbignb3JkZXJzJyk7XG4gICAgLy8gaW5zZXJ0IG9yZGVyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JkZXJzLmluc2VydE9uZShvcmRlcik7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBkZWxldGUgb3JkZXJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGRiLCBvcmRlcl9pZCkge1xuICAgIC8vIGdldCBvcmRlcnMgY29sbGVjdGlvblxuICAgIGNvbnN0IG9yZGVycyA9IGRiLmNvbGxlY3Rpb24oJ29yZGVycycpO1xuXG4gICAgLy8gZGVsZXRlIG9yZGVyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3JkZXJzLmRlbGV0ZU9uZSh7IF9pZDogbmV3IE9iamVjdElkKG9yZGVyX2lkKSB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cblxuZXhwb3J0IHtcbiAgICBjb25uZWN0RGF0YWJhc2UsXG4gICAgZW5zdXJlQ29sbGVjdGlvbnMsXG4gICAgaW5zZXJ0VXNlcixcbiAgICBnZXRVc2VyLFxuICAgIHZhbGlkYXRlTG9naW4sXG4gICAgaW5zZXJ0U2VlZCxcbiAgICBnZXRTZWVkLFxuICAgIGdldFByb2R1Y3RzLFxuICAgIGdldFByb2R1Y3QsXG4gICAgZ2V0Q2FydCxcbiAgICBhZGRUb0NhcnQsXG4gICAgcmVtb3ZlRnJvbUNhcnQsXG4gICAgZ2V0V2lzaGxpc3QsXG4gICAgYWRkVG9XaXNobGlzdCxcbiAgICByZW1vdmVGcm9tV2lzaGxpc3QsXG4gICAgZ2V0T3JkZXJzLFxuICAgIGFkZE9yZGVyLFxuICAgIGRlbGV0ZU9yZGVyLFxuICAgIGNsZWFyQ2FydCxcbiAgICBjbGVhcldpc2hsaXN0LFxuICAgIGluc2VydFBldCxcbiAgICBnZXRQZXRzLFxuICAgIGdldFBldCxcbiAgICBkZWxldGVQZXQsXG4gICAgc2VhcmNoUHJvZHVjdHMsXG59Il0sIm5hbWVzIjpbIk9iamVjdElkIiwiTW9uZ29DbGllbnQiLCJyZXF1aXJlIiwic2VlZHByb2R1Y3RzIiwiY29ubmVjdERhdGFiYXNlIiwiY2xpZW50IiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImVuc3VyZUNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnMiLCJkYiIsImNvbGxlY3Rpb24iLCJleGlzdHMiLCJsaXN0Q29sbGVjdGlvbnMiLCJuYW1lIiwiaGFzTmV4dCIsImNyZWF0ZUNvbGxlY3Rpb24iLCJzZWVkIiwiZ2V0U2VlZCIsInNlZWRQcm9kdWN0cyIsImNyZWF0ZUluZGV4IiwiaW5zZXJ0U2VlZCIsImRhdGUiLCJEYXRlIiwiaW5zZXJ0UGV0IiwicGV0IiwicGV0cyIsInJlc3VsdCIsImluc2VydE9uZSIsImdldFBldCIsImlkIiwiZmluZE9uZSIsIl9pZCIsImdldFBldHMiLCJ1c2VyX2lkIiwiZmluZCIsInRvQXJyYXkiLCJkZWxldGVQZXQiLCJkZWxldGVPbmUiLCJpbnNlcnRVc2VyIiwidXNlciIsInVzZXJzIiwiZ2V0VXNlciIsImVtYWlsIiwidmFsaWRhdGVMb2dpbiIsInBhc3N3b3JkIiwic2VlZHMiLCJwcm9kcyIsInByb2R1Y3RzIiwiaW5zZXJ0TWFueSIsImdldFByb2R1Y3RzIiwiZmlsdGVyIiwiZ2V0UHJvZHVjdCIsInByb2R1Y3QiLCJzZWFyY2hQcm9kdWN0cyIsInF1ZXJ5IiwiJHRleHQiLCIkc2VhcmNoIiwiZ2V0Q2FydCIsImNhcnQiLCJuZXdDYXJ0IiwiYWRkVG9DYXJ0IiwicHJvZHVjdF9pZCIsImluZGV4IiwiZmluZEluZGV4IiwicXVhbnRpdHkiLCJwdXNoIiwidXBkYXRlT25lIiwiJHNldCIsInJlbW92ZUZyb21DYXJ0Iiwic3BsaWNlIiwiY29uc29sZSIsImxvZyIsImNsZWFyQ2FydCIsImxlbmd0aCIsImdldFdpc2hsaXN0IiwibGlzdCIsIm5ld0xpc3QiLCJhZGRUb1dpc2hsaXN0IiwicmVtb3ZlRnJvbVdpc2hsaXN0IiwiY2xlYXJXaXNobGlzdCIsImdldE9yZGVycyIsIm9yZGVycyIsInNvcnQiLCJhZGRPcmRlciIsIm9yZGVyIiwiZGVsZXRlT3JkZXIiLCJvcmRlcl9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./db/db.js\n");

/***/ }),

/***/ "(api)/./pages/api/register.js":
/*!*******************************!*\
  !*** ./pages/api/register.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _db_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/db/db */ \"(api)/./db/db.js\");\n\n// register user: name, email, password\nasync function handler(req, res) {\n    // get db\n    const client = await (0,_db_db__WEBPACK_IMPORTED_MODULE_0__.connectDatabase)();\n    // ensure collections exist\n    await (0,_db_db__WEBPACK_IMPORTED_MODULE_0__.ensureCollections)(client);\n    // get email and password from request body\n    const { name , email , password  } = req.body;\n    // get db\n    const db = client.db();\n    // check if user exists\n    const user = await (0,_db_db__WEBPACK_IMPORTED_MODULE_0__.getUser)(db, email);\n    if (user) {\n        // user exists\n        res.status(200).json({\n            success: false,\n            message: \"User already exists\"\n        });\n    } else {\n        // user doesn't exist, insert user\n        const result = await (0,_db_db__WEBPACK_IMPORTED_MODULE_0__.insertUser)(db, {\n            name,\n            email,\n            password\n        });\n        // return success\n        res.status(200).json({\n            success: true,\n            user: {\n                email,\n                name,\n                id: result.insertedId\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcmVnaXN0ZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Y7QUFFbEYsdUNBQXVDO0FBQ3hCLGVBQWVJLFFBQVFDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzVDLFNBQVM7SUFDVCxNQUFNQyxTQUFTLE1BQU1QLHVEQUFlQTtJQUVwQywyQkFBMkI7SUFDM0IsTUFBTUMseURBQWlCQSxDQUFDTTtJQUV4QiwyQ0FBMkM7SUFDM0MsTUFBTSxFQUFFQyxLQUFJLEVBQUVDLE1BQUssRUFBRUMsU0FBUSxFQUFFLEdBQUdMLElBQUlNLElBQUk7SUFHMUMsU0FBUztJQUNULE1BQU1DLEtBQUtMLE9BQU9LLEVBQUU7SUFFcEIsdUJBQXVCO0lBQ3ZCLE1BQU1DLE9BQU8sTUFBTVgsK0NBQU9BLENBQUNVLElBQUlIO0lBRS9CLElBQUlJLE1BQU07UUFDTixjQUFjO1FBQ2RQLElBQUlRLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUyxLQUFLO1lBQUVDLFNBQVM7UUFBc0I7SUFDMUUsT0FBTztRQUNILGtDQUFrQztRQUNsQyxNQUFNQyxTQUFTLE1BQU1mLGtEQUFVQSxDQUFDUyxJQUFJO1lBQ2hDSjtZQUNBQztZQUNBQztRQUNKO1FBRUEsaUJBQWlCO1FBQ2pCSixJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVMsSUFBSTtZQUFFSCxNQUFNO2dCQUN4Q0o7Z0JBQ0FEO2dCQUNBVyxJQUFJRCxPQUFPRSxVQUFVO1lBQ3pCO1FBQUM7SUFDTCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3Bhd3NpdGl2ZWx5Ly4vcGFnZXMvYXBpL3JlZ2lzdGVyLmpzPzE3NDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29ubmVjdERhdGFiYXNlLCBlbnN1cmVDb2xsZWN0aW9ucywgZ2V0VXNlciwgaW5zZXJ0VXNlciB9IGZyb20gXCJAL2RiL2RiXCI7XG5cbi8vIHJlZ2lzdGVyIHVzZXI6IG5hbWUsIGVtYWlsLCBwYXNzd29yZFxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAgIC8vIGdldCBkYlxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNvbm5lY3REYXRhYmFzZSgpO1xuICAgIFxuICAgIC8vIGVuc3VyZSBjb2xsZWN0aW9ucyBleGlzdFxuICAgIGF3YWl0IGVuc3VyZUNvbGxlY3Rpb25zKGNsaWVudCk7XG5cbiAgICAvLyBnZXQgZW1haWwgYW5kIHBhc3N3b3JkIGZyb20gcmVxdWVzdCBib2R5XG4gICAgY29uc3QgeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG5cbiAgICAvLyBnZXQgZGJcbiAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuXG4gICAgLy8gY2hlY2sgaWYgdXNlciBleGlzdHNcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlcihkYiwgZW1haWwpO1xuXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgICAgLy8gdXNlciBleGlzdHNcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJVc2VyIGFscmVhZHkgZXhpc3RzXCIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlciBkb2Vzbid0IGV4aXN0LCBpbnNlcnQgdXNlclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnNlcnRVc2VyKGRiLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmV0dXJuIHN1Y2Nlc3NcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCB1c2VyOiB7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpZDogcmVzdWx0Lmluc2VydGVkSWQsXG4gICAgICAgIH19KTtcbiAgICB9XG59Il0sIm5hbWVzIjpbImNvbm5lY3REYXRhYmFzZSIsImVuc3VyZUNvbGxlY3Rpb25zIiwiZ2V0VXNlciIsImluc2VydFVzZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY2xpZW50IiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwiZGIiLCJ1c2VyIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwicmVzdWx0IiwiaWQiLCJpbnNlcnRlZElkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/register.js\n");

/***/ }),

/***/ "(api)/./db/productsData.json":
/*!******************************!*\
  !*** ./db/productsData.json ***!
  \******************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"name":"Blue Buffalo Life Protection Formula Puppy Chicken & Brown Rice Recipe Dry Dog Food","prod_description":"Formulated to support your puppy\'s healthy growth and development.","price":74.99,"quantity":20,"image_file":"/images/lpf_dog_dry_puppy_chickenbrownrice_mobile.jpg","allergens":false,"age_preferred":1},{"name":"Kong Classic Dog Toy, Large","prod_description":"This is a test","price":49.99,"quantity":9999,"image_file":"/images/product_images/T4_LIFE_1.jpg","allergens":false,"age_preferred":5},{"name":"Kong Classic Dog Toy, Small","prod_description":"This is a test","price":39.99,"quantity":36,"image_file":"/images/product_images/T4_LIFE_1.jpg","allergens":false,"age_preferred":1},{"name":"Blue Buffalor Life Protection Formula Beef Recipe Dry Dog Food","prod_description":"Formulated for the health and well-being of dogs.","price":89.61,"quantity":2,"image_file":"/images/product_images/lpf_dog_dry_adult_beefbrownrice_mobile.jpg","allergens":false,"age_preferred":5},{"name":"Blue Buffalo Life Protection Formula Senior Chicken & Brown Rice Recipe Dry Dog Food","prod_description":"Formulated for the health and well-being of senior dogs.","price":42.96,"quantity":69,"image_file":"/images/product_images/lpf_dog_dry_senior_chickenbrownrice_mobile.jpg","allergens":false,"age_preferred":10},{"name":"Blue Buffalo Baby Blue Formula High-Protein, Grain-Free Chicken and Pea Recipe, Dry Cat Food","prod_description":"Formulated for the health and well-being of senior dogs.","price":49.99,"quantity":1,"image_file":"/images/product_images/babyblue_cat_dry_hpchickenpea_mobile.jpg","allergens":false,"age_preferred":0},{"name":"BLUE Tastefuls Indoor Hairball Control, Chicken and Brown Rice Recipe, Dry Cat Food","prod_description":"Formulated for the health and well-being of senior dogs.","price":22,"quantity":900000,"image_file":"/images/product_images/pdp_mobile_tastefuls_dry_hairball.jpg","allergens":false,"age_preferred":5},{"name":"BLUE Wilderness Mature Chicken Recipe, Dry Cat Food","prod_description":"Formulated for the health and well-being of senior dogs.","price":75,"quantity":499,"image_file":"/images/product_images/wild_cat_dry_mature_chicken_mobile.jpg","allergens":false,"age_preferred":10},{"name":"Frisco Paw & Play Mouse Cat Toy, 10-Pack","prod_description":"Drive your kitty wild with the sights, sounds and feels they love to play with. Lets get ready to bat, swat and purr!","price":20.98,"quantity":0,"image_file":"/images/product_images/166366_Main._AC_SS108_V1573593232_.jpg","allergens":false,"age_preferred":1},{"name":"PawsPets Exclusive Cat Back Scratcher...Limited Edition","prod_description":"Limited Edition small back scratcher for the most important members of the family.","price":12000.21,"quantity":100,"image_file":"/images/product_images/th.jpg","allergens":true,"age_preferred":5},{"name":"PawsPets Exclusive Cat Tower ","prod_description":"PawsPets new cat tower filled with amnenties for your cats.","price":347,"quantity":9,"image_file":"/images/product_images/CatTower.jpg","allergens":false,"age_preferred":5},{"name":"PawsPets Exclusive 18kt Solid Gold Dog Leash","prod_description":"","price":36876.56,"quantity":2,"image_file":"/images/product_images/IcedOutDoggy.jpg","allergens":false,"age_preferred":5},{"name":"Diamond Dog Collar","prod_description":"Do you have Bottomless Pockets?","price":150500,"quantity":0,"image_file":"/images/product_images/150k.jpg","allergens":false,"age_preferred":10},{"name":"AMOUR AMOUR DIAMOND DOG COLLAR","prod_description":"The Buggati of Dog Collars","price":4000000,"quantity":1,"image_file":"/images/product_images/1_Amour_Amour_Diamond_Dog_Collar_-_3_million_-_Most_Expensive_Dog_Collars.jpg","allergens":false,"age_preferred":5},{"name":"AMOUR DE LA MER","prod_description":"The price says enough...","price":1000000,"quantity":99,"image_file":"/images/product_images/2_Amour_de_la_Mer_-_Most_Expensive_Dog_Collars.jpg","allergens":false,"age_preferred":5},{"name":"Versace MEDUSA PET LEAD","prod_description":"A leather pet lead decorated with Medusa studs. ","price":40000,"quantity":89,"image_file":"/images/product_images/90_ZDOGLACE4-ZPEL0061_Z1008_20_MedusaPetLead-PetAccessories-versace-online-store_0_1.jpg","allergens":false,"age_preferred":5},{"name":"FurryFriends Deluxe Dog Bed","prod_description":"FurryFriends cozy and comfortable dog bed for your furry companion.","price":159.99,"quantity":23,"image_file":"/images/product_images/dogobedo.jpg","allergens":false,"age_preferred":5},{"name":"CritterPlay Exotic Bird Toy Set","prod_description":"CritterPlay colorful and interactive toy set for exotic birds.","price":49.95,"quantity":14,"image_file":"/images/product_images/BirdToys.jpg","allergens":true,"age_preferred":5},{"name":"FishFrenzy Aquarium Starter Kit","prod_description":"FishFrenzy aquarium starter kit includes everything you need to start an aquarium.","price":89.99,"quantity":8,"image_file":"/images/product_images/FishFrenzy.jpg","allergens":false,"age_preferred":18},{"name":"HamsterHaven Playpen","prod_description":"HamsterHaven playpen for your furry little friend to play and explore.","price":29.95,"quantity":20,"image_file":"/images/product_images/HamsterHaven.jpg","allergens":false,"age_preferred":5},{"name":"ReptileRetreat Terrarium Kit","prod_description":"ReptileRetreat terrarium kit includes everything you need to create a comfortable habitat for your reptile.","price":149.99,"quantity":5,"image_file":"/images/product_images/Reptile.jpg","allergens":false,"age_preferred":16},{"name":"FeatheredFriends Wild Bird Feeder","prod_description":"FeatheredFriends wild bird feeder for your outdoor feathered friends.","price":209.99,"quantity":32,"image_file":"/images/product_images/BirdFeed.jpg","allergens":false,"age_preferred":5},{"name":"AquaticWonders Betta Fish Bowl","prod_description":"AquaticWonders betta fish bowl for your betta fish.","price":49.99,"quantity":18,"image_file":"/images/product_images/Beta.jpg","allergens":false,"age_preferred":5},{"name":"PetSafe Automatic Feeder","prod_description":"PetSafe automatic feeder to keep your pet fed even when you\'re not home.","price":59.95,"quantity":6,"image_file":"/images/product_images/Autofeed.jpg","allergens":false,"age_preferred":5},{"name":"CritterCraze Small Animal Cage","prod_description":"CritterCraze small animal cage for your pet rodents and other small animals.","price":79.95,"quantity":12,"image_file":"/images/product_images/Small.jpg","allergens":false,"age_preferred":5},{"name":"Fido\'s Fashion Collar","prod_description":"Fido\'s Fashion Collar is a stylish accessory for your dog to wear on walks and outings.","price":24.99,"quantity":15,"image_file":"/images/product_images/Fiddo.jpg","allergens":false,"age_preferred":5},{"name":"Whisker\'s Delight Cat Food","prod_description":"Whisker\'s Delight cat food is a nutritious and delicious meal for your feline friend.","price":34.99,"quantity":25,"image_file":"/images/product_images/Whiskers.jpg","allergens":true,"age_preferred":5},{"name":"Robot Dog","prod_description":"Robot dog with feeling and a mind of its own.","price":74000.99,"quantity":8,"image_file":"/images/product_images/robodog.jpg","allergens":false,"age_preferred":5},{"name":"Purrfect Paradise Scratching Post","prod_description":"Purrfect Paradise scratching post is a great way for your cat to satisfy their scratching instincts.","price":99.99,"quantity":10,"image_file":"/images/product_images/CatScratcher.jpg","allergens":false,"age_preferred":5},{"name":"Fluffy Fleece Pet Bed","prod_description":"Fluffy Fleece Pet Bed is a cozy bed for your furry friend to snuggle up in.","price":309.99,"quantity":20,"image_file":"/images/product_images/PetBed.jpg","allergens":false,"age_preferred":5},{"name":"Canine Camo Dog Harness","prod_description":"Canine Camo Dog Harness is a durable and stylish harness for your dog to wear on walks and hikes.","price":409.99,"quantity":7,"image_file":"/images/product_images/Canine.jpg","allergens":false,"age_preferred":5},{"name":"Gourmet Fish Flakes","prod_description":"Gourmet Fish Flakes are a delicious and nutritious food for your aquarium fish.","price":99.99,"quantity":30,"image_file":"/images/product_images/FishyFlakes.jpg","allergens":false,"age_preferred":5},{"name":"Paw Print Litter Mat","prod_description":"Paw Print Litter Mat helps keep your floors clean by trapping litter and dirt from your cat\'s paws.","price":54.99,"quantity":13,"image_file":"/images/product_images/PawP.jpg","allergens":false,"age_preferred":5},{"name":"Avian Adventures Bird Cage","prod_description":"Avian Adventures bird cage is a spacious and comfortable home for your pet bird.","price":449.99,"quantity":4,"image_file":"/images/product_images/BirdPrison.jpg","allergens":false,"age_preferred":5},{"name":"Wagging Tail Dog Treats","prod_description":"Wagging Tail Dog Treats are a delicious and healthy snack for your pup.","price":17.99,"quantity":40,"image_file":"/images/product_images/Mixed-Treat-Box.jpg","allergens":true,"age_preferred":5},{"name":"Aquatic Plants Pack","prod_description":"Aquatic Plants Pack includes a variety of plants to add to your aquarium for decoration and oxygenation.","price":190.99,"quantity":15,"image_file":"/images/product_images/bba166191939747992737ce8442988ad.jpg","allergens":false,"age_preferred":5}]');

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/register.js"));
module.exports = __webpack_exports__;

})();